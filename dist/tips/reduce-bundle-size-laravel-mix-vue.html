<!DOCTYPE html>
<html lang="id-ID">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Tips: Reduce Bundle Size of Laravel Mix + Vue 2 Project | NyanDev Blog</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/icons/favicon.ico">
    <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="36x36" href="/icons/android-icon-36x36.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
    <link rel="preconnect" href="https://cdn.statically.io">
    <link rel="preconnect" href="https://telegra.ph">
    <script src="https://cdn.statically.io/gh/aFarkas/lazysizes/gh-pages/lazysizes.min.js" async=""></script>
    <link rel="alternate" type="application/rss+xml" href="https://blog.nyandev.id/rss.xml" title="NyanDev Blog RSS Feed">
    <link rel="alternate" type="application/atom+xml" href="https://blog.nyandev.id/feed.atom" title="NyanDev Blog Atom Feed">
    <link rel="alternate" type="application/json" href="https://blog.nyandev.id/feed.json" title="NyanDev Blog JSON Feed">
    <meta name="description" content="Sebelum kita masuk ke dalam pembahasan, perlu diketahui bahwa project yang kali ini kita bahas adalah Web App (bukan website) yang dimana...">
    <meta name="keywords" content="bundle,laravel,mix,vue,reduce,file,size">
    <meta property="article:published_time" content="2020-06-03T08:01:21.000Z">
    <meta property="article:modified_time" content="2020-06-05T10:00:16.000Z">
    <meta property="og:site_name" content="NyanDev Blog">
    <meta property="og:title" content="Tips: Reduce Bundle Size of Laravel Mix + Vue 2 Project">
    <meta property="og:description" content="Sebelum kita masuk ke dalam pembahasan, perlu diketahui bahwa project yang kali ini kita bahas adalah Web App (bukan website) yang dimana...">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://blog.nyandev.id/tips/reduce-bundle-size-laravel-mix-vue.html">
    <meta property="og:image" content="https://blog.nyandev.id/images/covers/reduce-bundle-size-laravel-mix-vue.jpeg">
    <meta name="twitter:title" content="Tips: Reduce Bundle Size of Laravel Mix + Vue 2 Project">
    <meta name="twitter:description" content="Sebelum kita masuk ke dalam pembahasan, perlu diketahui bahwa project yang kali ini kita bahas adalah Web App (bukan website) yang dimana...">
    <meta name="twitter:url" content="https://blog.nyandev.id/tips/reduce-bundle-size-laravel-mix-vue.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://blog.nyandev.id/images/covers/reduce-bundle-size-laravel-mix-vue.jpeg">
    <meta property="og:image:alt" content="Tips: Reduce Bundle Size of Laravel Mix + Vue 2 Project">
    <meta property="og:image:width" content="450">
    <meta property="article:author" content="https://facebook.com/ryan.hac">
    <meta name="theme-color" content="#65c59a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="preload" href="/assets/css/0.styles.32b1d79a.css" as="style"><link rel="preload" href="/assets/js/app.7e510d46.js" as="script"><link rel="preload" href="/assets/js/2.9f835e0b.js" as="script"><link rel="preload" href="/assets/js/41.564da301.js" as="script"><link rel="preload" href="/assets/js/4.40f398e1.js" as="script"><link rel="preload" href="/assets/js/6.fe87e115.js" as="script"><link rel="preload" href="/assets/js/8.921718ba.js" as="script"><link rel="prefetch" href="/assets/js/10.99d7ed95.js"><link rel="prefetch" href="/assets/js/11.9874722c.js"><link rel="prefetch" href="/assets/js/12.44d458dd.js"><link rel="prefetch" href="/assets/js/13.d175c0bc.js"><link rel="prefetch" href="/assets/js/14.7b0734d4.js"><link rel="prefetch" href="/assets/js/15.93154e45.js"><link rel="prefetch" href="/assets/js/16.57bb0bb9.js"><link rel="prefetch" href="/assets/js/17.fef3c5e9.js"><link rel="prefetch" href="/assets/js/18.d95f131f.js"><link rel="prefetch" href="/assets/js/19.27096e36.js"><link rel="prefetch" href="/assets/js/20.1803883b.js"><link rel="prefetch" href="/assets/js/21.3c882dde.js"><link rel="prefetch" href="/assets/js/22.d4e6a8ab.js"><link rel="prefetch" href="/assets/js/23.e60b0102.js"><link rel="prefetch" href="/assets/js/24.1874fb7b.js"><link rel="prefetch" href="/assets/js/25.3b5a154d.js"><link rel="prefetch" href="/assets/js/26.f52819cd.js"><link rel="prefetch" href="/assets/js/27.3669038a.js"><link rel="prefetch" href="/assets/js/28.5f570948.js"><link rel="prefetch" href="/assets/js/29.694510fc.js"><link rel="prefetch" href="/assets/js/3.4bda5e48.js"><link rel="prefetch" href="/assets/js/30.ab8d1ccf.js"><link rel="prefetch" href="/assets/js/31.ac8d6686.js"><link rel="prefetch" href="/assets/js/32.c1b26e5a.js"><link rel="prefetch" href="/assets/js/33.9309aed6.js"><link rel="prefetch" href="/assets/js/34.3f8ec3a5.js"><link rel="prefetch" href="/assets/js/35.aa42c23e.js"><link rel="prefetch" href="/assets/js/36.12994f0d.js"><link rel="prefetch" href="/assets/js/37.73df454c.js"><link rel="prefetch" href="/assets/js/38.40f46242.js"><link rel="prefetch" href="/assets/js/39.dc358b15.js"><link rel="prefetch" href="/assets/js/40.f736adf1.js"><link rel="prefetch" href="/assets/js/42.d273b766.js"><link rel="prefetch" href="/assets/js/5.b7ea8e87.js"><link rel="prefetch" href="/assets/js/7.b95f864c.js"><link rel="prefetch" href="/assets/js/9.8721d71e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.32b1d79a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">NyanDev Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Javascript" class="dropdown-title"><span class="title">Javascript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javascript/" class="nav-link">
  Javascript
</a></li><li class="dropdown-item"><!----> <a href="/preact/" class="nav-link">
  Preact
</a></li><li class="dropdown-item"><!----> <a href="/preact/belajar-preact/" class="nav-link">
  Series: Belajar Preact
</a></li></ul></div></div><div class="nav-item"><a href="/devops/" class="nav-link">
  Devops
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Others" class="dropdown-title"><span class="title">Others</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tips/" class="nav-link router-link-active">
  Tips
</a></li><li class="dropdown-item"><!----> <a href="/informasi/" class="nav-link">
  Informasi
</a></li><li class="dropdown-item"><!----> <a href="/bookmark/" class="nav-link">
  Bookmark
</a></li></ul></div></div> <a href="https://github.com/nyancodeid/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Javascript" class="dropdown-title"><span class="title">Javascript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javascript/" class="nav-link">
  Javascript
</a></li><li class="dropdown-item"><!----> <a href="/preact/" class="nav-link">
  Preact
</a></li><li class="dropdown-item"><!----> <a href="/preact/belajar-preact/" class="nav-link">
  Series: Belajar Preact
</a></li></ul></div></div><div class="nav-item"><a href="/devops/" class="nav-link">
  Devops
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Others" class="dropdown-title"><span class="title">Others</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tips/" class="nav-link router-link-active">
  Tips
</a></li><li class="dropdown-item"><!----> <a href="/informasi/" class="nav-link">
  Informasi
</a></li><li class="dropdown-item"><!----> <a href="/bookmark/" class="nav-link">
  Bookmark
</a></li></ul></div></div> <a href="https://github.com/nyancodeid/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="tips-reduce-bundle-size-of-laravel-mix-vue-2-project"><a href="#tips-reduce-bundle-size-of-laravel-mix-vue-2-project" class="header-anchor">#</a> Tips: Reduce Bundle Size of Laravel Mix + Vue 2 Project</h1> <div class="author d-flex"><div class="author-main d-flex"><div class="author-avatar"><img src="/images/profiles/avatar.jpg" alt="Ryan Aunur Rassyid" width="48" height="48"> <!----></div> <div class="author-detail"><div><span>Ryan Aunur Rassyid</span> <div class="author-detail--follow"><button>Follow</button></div></div> <span>June 3, 2020 · 7 min read</span></div></div> <div class="author-social d-flex"><div class="author-social-wrapper d-flex"><div><a href="https://twitter.com/AunurRyan" target="_blank"><svg width="29" height="29" class="q"><path d="M22.05 7.54a4.47 4.47 0 0 0-3.3-1.46 4.53 4.53 0 0 0-4.53 4.53c0 .35.04.7.08 1.05A12.9 12.9 0 0 1 5 6.89a5.1 5.1 0 0 0-.65 2.26c.03 1.6.83 2.99 2.02 3.79a4.3 4.3 0 0 1-2.02-.57v.08a4.55 4.55 0 0 0 3.63 4.44c-.4.08-.8.13-1.21.16l-.81-.08a4.54 4.54 0 0 0 4.2 3.15 9.56 9.56 0 0 1-5.66 1.94l-1.05-.08c2 1.27 4.38 2.02 6.94 2.02 8.3 0 12.86-6.9 12.84-12.85.02-.24 0-.43 0-.65a8.68 8.68 0 0 0 2.26-2.34c-.82.38-1.7.62-2.6.72a4.37 4.37 0 0 0 1.95-2.51c-.84.53-1.81.9-2.83 1.13z"></path></svg></a></div> <div><a href="https://www.facebook.com/ryan.hac" target="_blank"><svg width="29" height="29" class="q"><path d="M23.2 5H5.8a.8.8 0 0 0-.8.8V23.2c0 .44.35.8.8.8h9.3v-7.13h-2.38V13.9h2.38v-2.38c0-2.45 1.55-3.66 3.74-3.66 1.05 0 1.95.08 2.2.11v2.57h-1.5c-1.2 0-1.48.57-1.48 1.4v1.96h2.97l-.6 2.97h-2.37l.05 7.12h5.1a.8.8 0 0 0 .79-.8V5.8a.8.8 0 0 0-.8-.79"></path></svg></a></div> <div><a href="https://medium.com/@ryandevstudio" target="_blank"><svg enable-background="new 0 0 24 24" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m7.996 21.324c0 .695-.521.982-1.098.695l-6.228-3.113c-.188-.089-.346-.238-.475-.447s-.195-.417-.195-.622v-15.227c0-.568.341-.825 1.112-.441l6.844 3.42c.099.099.026-.581.04 15.735zm.857-14.32 7.152 11.568-7.152-3.553zm15.147.241v14.079c0 .223-.062.403-.188.541-.125.138-.295.207-.509.207s-.424-.058-.629-.174l-5.906-2.939zm-.04-1.603c0 .027-1.145 1.895-3.435 5.603s-3.632 5.88-4.025 6.512l-5.223-8.469 4.339-7.039c.236-.388.72-.456 1.045-.294l7.246 3.607c.035.017.053.044.053.08z"></path></svg></a></div></div></div></div> <p class="featured-image"><img alt="Tips: Reduce Bundle Size of Laravel Mix + Vue 2 Project" title="Tips: Reduce Bundle Size of Laravel Mix + Vue 2 Project | NyanDev Blog" data-src="/images/covers/reduce-bundle-size-laravel-mix-vue.jpeg" src="/images/covers/reduce-bundle-size-laravel-mix-vue.jpeg" class="no-zoom lazy"> <span class="featured-image--subtitle">(featured image by <u>Markus Spiske</u> on <u><a href="https://unsplash.com/photos/wkieEIVb1pA"   rel="noopener noreferrer" target="_blank">unsplash.com</a></u>)</span></p> <h2 id="diclaimer"><a href="#diclaimer" class="header-anchor">#</a> Diclaimer</h2> <p>Sebelum kita masuk ke dalam pembahasan, perlu diketahui bahwa project yang kali ini kita bahas adalah <strong>Web App</strong> (bukan website) yang dimana tujuan dari meminimalkan bundle size adalah untuk meningkatkan kecepatan loading dan minimalkan library yang tidak dibutuhkan.</p> <h2 id="table-of-content"><a href="#table-of-content" class="header-anchor">#</a> Table of Content</h2> <p></p><div class="table-of-contents"><ul><li><a href="#diclaimer">Diclaimer</a></li><li><a href="#table-of-content">Table of Content</a></li><li><a href="#fyi-for-your-information">FYI (For Your Information)</a></li><li><a href="#metode-dan-teknik">Metode dan Teknik</a></li><li><a href="#penerapan">Penerapan</a><ul><li><a href="#extract-vue-style">Extract Vue Style</a></li><li><a href="#laravel-mix-extract">Laravel Mix Extract</a></li><li><a href="#tailwindcss-variants-coreplugin-and-purge">TailwindCSS Variants, CorePlugin, and Purge</a></li><li><a href="#es2015-import-transform-cherry-pick">ES2015 Import Transform Cherry-Pick</a></li><li><a href="#use-luxon-not-moment-js">Use Luxon, not Moment.js</a></li></ul></li><li><a href="#moment-of-truth-a-k-a-result">Moment of Truth a.k.a Result</a></li><li><a href="#update-1-1-0">Update 1.1.0</a></li></ul></div><p></p> <h2 id="fyi-for-your-information"><a href="#fyi-for-your-information" class="header-anchor">#</a> FYI (For Your Information)</h2> <p>Supaya ada gambaran ukuran file dan apa saja file nya, berikut adalah hasil menjalankan perintah yarn prod.</p> <p><img src="https://telegra.ph/file/2d683ddff0ce4f9f191f6.png" alt="Webpack Bundle Result"> <em>Webpack Bundle Result</em></p> <p>Kita akan memperkecil dan membagi kembali file CSS dan JS yang sudah dibundle menjadi beberapa part supaya memaksimalkan prosess load dalam website. Sebelumnya ukuran file vendor.js ini parah banget bisa sampai 2MB lebih.</p> <h2 id="metode-dan-teknik"><a href="#metode-dan-teknik" class="header-anchor">#</a> Metode dan Teknik</h2> <p>Oke kita mulai dengan menganalisa metode apa yang cocok digunakan untuk memperkecil ukuran file-file diatas. Berikut teknik atau tips yang sekiranya cocok dan yang akan kita gunakan:</p> <ol><li>Extract Vue Styles</li> <li>Laravel Mix Extract (Code Splitting Build In)</li> <li>TailwindCSS Variants and CorePlugin selection.</li> <li>TailwindCSS Purge</li> <li>ES2015/ES6 Import Transform Cherry-Pick</li> <li>Use Luxon, not Moment.js</li></ol> <p>Dan library yang cukup dikenal yang dipakai pada project ini adalah <strong>Vue, Leaflet, Luxon, Lodash, TaildwindCSS, Axios, Geolib</strong> dan beberapa plugin vue lainnya.</p> <p>Oke sekarang kita petakkan mana library yang paling besar dampaknya terhadap ukuran file bundlenya dan yang bisa kita diminimalisir ukurannya. Dan ternyata <strong>Lodash</strong> dan <strong>TailwindCSS</strong> bisa, sedangkan yang lainnya sudah jadi ukuran fixed atau bisa dibilang sudah pas.</p> <p>Selanjutnya kita bisa langsung eksekusi dengan memanfaatkan Tips diatas yang sudah kita pilih dan bisa diterapkan.</p> <blockquote><p>Screenshot diatas diambil setelah melakukkan teknik/tips optimasi nomor 2, 3, 4, dan 6</p></blockquote> <h2 id="penerapan"><a href="#penerapan" class="header-anchor">#</a> Penerapan</h2> <p>Setelah diteliti metode atau teknik apa yang cocok, maka langsung saja kita terapkan satu persatu pada project kita.</p> <h3 id="extract-vue-style"><a href="#extract-vue-style" class="header-anchor">#</a> Extract Vue Style</h3> <p>Vue sendiri pada default nya memiliki template file yang berekstensi .vue yang mana memiliki 3 elemen didalamnya, yaitu template, style, script. Nah kita akan mengeleminasi style supaya di extract keluar dari file bundle-nya yaitu app.js . Jadi secara default file vue akan di-bundle (CSS dan JS nya) menjadi satu file yang pada project ini yaitu app.js. Kita tidak mau itu terjadi dan akan mengeluarkan setiap style yang ada di file Vue menjadi file CSS sendiri.</p> <p>Kita bisa melakukkan nya dengan menambahkan opsi di file <code>webpack.mix.js</code> kita.</p> <div class="language-js extra-class"><pre class="language-js"><code>mix<span class="token punctuation">.</span><span class="token function">options</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token operator">...</span>
  extractVueStyles<span class="token operator">:</span> <span class="token string">'public/css/app-ui.css'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>Nah hasil style nya akan di berada di <code>public/css/app-ui.css</code>. Jangan lupa untuk menambahkan di Laravel View nya untuk memuat file css diatas.</p> <h3 id="laravel-mix-extract"><a href="#laravel-mix-extract" class="header-anchor">#</a> Laravel Mix Extract</h3> <p>Laravel Mix sendiri punya mekanisme untuk memisahkan antara Logical App/Web dan Vendor atau library yang kita gunakan. Gunanya apa dipisah? untuk mencegah browser men-download ulang file vendor kembali ketika cache di browser dimuat ulang. Kita tidak mau ketika kita melakukkan perubahan pada Logical Web kita membuat browser memuat kembali library/vendor yang tidak kita ubah. Jadi kita pisah supaya yang dimuat ulang oleh browser adalah Logical web kita saja sedangkan file vendor tetap akan mengambil dari file yang sudah disimpan sebagai cache oleh browser.</p> <p>Kita bisa melakukkan nya dengan menambahkan opsi di file <code>webpack.mix.js</code> kita.</p> <div class="language-js extra-class"><pre class="language-js"><code>mix<span class="token punctuation">.</span><span class="token function">extract</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>mix<span class="token punctuation">.</span><span class="token function">inProduction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  mix<span class="token punctuation">.</span><span class="token function">version</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Untuk memaksimalkan fitur extract ini kita bisa menambahkan versioning pada production build.</p> <a href="https://laravel-mix.com/docs/5.0/extract" target="_blank" class="link-preview"><div class="link-preview--content"><p class="title">Library Code Splitting | Laravel Mix Documentation</p><p>Documentation for Laravel Mix.</p> <p>laravel-mix.com</p></div><div class="link-preview--thumbnail" style="background-image:url(https://telegra.ph/file/73935aea4865c151c4c70.png);"></div></a><h3 id="tailwindcss-variants-coreplugin-and-purge"><a href="#tailwindcss-variants-coreplugin-and-purge" class="header-anchor">#</a> TailwindCSS Variants, CorePlugin, and Purge</h3> <p><strong>TailwindCSS</strong> memiliki ukuran yang sedikit brutal karena semua style akan kita pakai semua jika kita tidak melakukkan <em>purgecss</em> (mengeliminasi style yang tidak terpakai secara otomatis) dan memilih secara manual style mana yang kita pakai atau kita keep nantinya.</p> <p>Pada file <code>tailwind.config.js</code> kita akan menambahkan beberapa konfigurasi dan pastikan bahwa anda sudah mengkonfigurasi Laravel Mix anda dengan TailwindCSS sesuai dengan dokumentasi tailwind yang ada.</p> <a href="https://tailwindcss.com/docs/installation/" target="_blank" class="link-preview"><div class="link-preview--content"><p class="title">Installation - Tailwind CSS</p><p>Quick start guide for installing and configuring Tailwind CSS.</p> <p>tailwindcss.com</p></div><div class="link-preview--thumbnail" style="background-image:url(https://tailwindcss.com/img/twitter-large-card.png);"></div></a><p>Berikut adalah beberapa contoh konfigurasi Tailwind yang dipakai pada project ini.</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  purge<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'./resources/js/**.*.vue'</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  corePlugins<span class="token operator">:</span> <span class="token punctuation">{</span>
    float<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    fill<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    objectFit<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  variants<span class="token operator">:</span> <span class="token punctuation">{</span>
    appearance<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    backgroundColor<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    borderColor<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Untuk versi lengkapnya bisa ke Gist Github ini:
https://gist.github.com/nyancodeid/19e2402d3f006a3d68f816ca5f59d977#file-tailwind-config-js</p> <h3 id="es2015-import-transform-cherry-pick"><a href="#es2015-import-transform-cherry-pick" class="header-anchor">#</a> ES2015 Import Transform Cherry-Pick</h3> <p>Untuk meng-import sebuah library di project biasanya kita melakukkan cara berikut:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">'lodash'</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> geolib <span class="token keyword">from</span> <span class="token string">'geolib'</span>
</code></pre></div><p>Dengan melakukkan import dengan cara diatas, artinya kita meng-import seleuruh fitur dan method ada ada pada <em>library/package</em> tersebut. Untuk meminimalisir ukuran bundle biasakan untuk meng-import method atau function yang diperlukan saja. Cara nya dengan import yang diperlukan atau biasa disebut <strong>Cherry-Pick</strong> (choose and take only).</p> <p>Contoh penerapan untuk library diatas adalah sebagai berikut:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> uniqBy <span class="token keyword">from</span> <span class="token string">'lodash/uniqBy'</span>
<span class="token keyword">import</span> getDistance <span class="token keyword">from</span> <span class="token string">'geolib/es/getDistance'</span>
</code></pre></div><p>pada script diatas kita hanya ingin method <strong>uniqBy</strong> pada lodash dan method <strong>getDistance</strong> pada geolib. Kita bisa hemat banyak space dengan memakai yang kita perlu saja.</p> <p>Setiap cara atau fitur yang dipakai pasti punya kekurangan dan kelebihannya, misalnya jika kita menggunakan <em>cherry-pick</em> kita akan kesulitan untuk <em>maintenance</em> jika kita perlu banyak method lain yang dimana kita harus meng-import satu per satu nya.</p> <p>Untuk memudahkan pekerjaan kita, kita bisa menggunakan plugin untuk babel yang bernama <code>babel-plugin-lodash</code> yang secara otomatis men-transform lodash yang di import seluruhnya menjadi method yang diperlukan. Contohnya seperti berikut:</p> <p><img src="https://telegra.ph/file/a8e3b51b2be1da2c9f608.png" alt="babel-plugin-lodash - A simple transform to cherry-pick Lodash modules so you don’t have to."> <em>babel-plugin-lodash - A simple transform to cherry-pick Lodash modules so you don’t have to.</em></p> <a href="https://www.npmjs.com/package/babel-plugin-lodash" target="_blank" class="link-preview"><div class="link-preview--content"><p class="title">babel-plugin-lodash-npm</p><p>Modular Lodash builds without the hassle.</p> <p>www.npmjs.com</p></div><div class="link-preview--thumbnail" style="background-image:url(https://static.npmjs.com/338e4905a2684ca96e08c7780fc68412.png);"></div></a><p>Kamu hanya perlu membuat file konfigurasi babel yaitu <code>.babelrc</code> pada root folder project. Laravel Mix akan secara otomatis akan melakukkan merge pada konfigurasi babel milik Laravel Mix dengan custom config babel kita buat tadi.</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;lodash&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="use-luxon-not-moment-js"><a href="#use-luxon-not-moment-js" class="header-anchor">#</a> Use Luxon, not Moment.js</h3> <p>Project ini sebelumnya menggunakan Moment untuk memudahkan bekerja dengan Tanggal dan Waktu. Setelah mengetahui bahwa Moment juga membuat library yang serupa tapi dengan method dan penulisan yang lebih mudah dipahami kini kita memilih Luxon sebagai library yang menangani Waktu dan Tanggal.</p> <p>Menurut situs <strong>BundlePhobia</strong> sendiri Moment.js memiliki ukuran bundle sebesar <strong>278KB</strong> sedangkan Luxon memiliki ukuran <strong>69KB</strong>. Dari segi ukuran bundle sudah terlihat bahwa Luxon lebih unggul.</p> <p>Tidak hanya keuntungan dari sisi ukuran saja yang lebih kecil, tapi penulisan kode jadi lebih mudah dipahami. Perbedaan paling jelas terlihat dari penulisan kode keduanya adalah Moment.js menerima tipe data apapun kedalam pemanggilan fungsi nya, sedangkan Luxon memisahkan hal tersebut. Berikut adalah contoh perbedaan penulisan Moment.js dan Luxon</p> <p><img src="https://telegra.ph/file/1f93e51fd4c5e4b2ba8d7.png" alt="Moment.js and Luxon Creation example"> <em>Moment.js and Luxon Creation example</em></p> <p>Gimana? mudah di baca kan. Mungkin awalnya sedikit ribet tapi keuntungan yang tak dirasakan diawal akan dirasakan ketika anda tidak melihat kodingan anda selama beberapa hari.</p> <h2 id="moment-of-truth-a-k-a-result"><a href="#moment-of-truth-a-k-a-result" class="header-anchor">#</a> Moment of Truth a.k.a Result</h2> <p>Setelah melakukkan beberapa optimasi diatas berikut adalah uji hasil bundle production:</p> <p><img src="https://telegra.ph/file/4fa783f5a900759e7cece.png" alt="Result"></p> <p>File vendor.js turun sebanyak 29% , file app.js turun sebanyak 15%, di ikuti kenaikan file css yang tidak berdampak banyak dengan performa web kita jadi tidak masalah kalau file css sedikit lebih besar.</p> <p><img src="https://telegra.ph/file/53d67284002708f67c025.png" alt="Webpack Bundle Analyzer"> <em>Webpack Bundle Analyzer</em></p> <p>Done, kita sepakat bahwa hasilnya cukup memuaskan. Kita bisa mengurangi ukuran dari file bundle kita dengan cara cara yang lain yang mungkin anda tau. Kita sangat menantikan cara cara brilian lainnya untuk membuat web lebih dan lebih baik lagi.</p> <h2 id="update-1-1-0"><a href="#update-1-1-0" class="header-anchor">#</a> Update 1.1.0</h2> <p>Ada beberapa perubahan yang saya lakukkan yang cukup banyak berdampak pada ukuran bundle nya. Ternyata terdapat library yang masuk kedalam file app.js yang tentu ini tidak diharapkan karena library seharusnya masuk ke vendor.js</p> <p>Jadi perubahan tersebut adalah:</p> <ol><li>Move all required style into app.scss (sebelumnya di-import pada app.js inisialiasi Vue)</li> <li>Temporary Disable JavascriptObfuscate for this article cases</li> <li>Vue Plugin import fixed</li></ol> <p>Berikut ukuran terakhir yang didapat:</p> <p><img src="https://telegra.ph/file/06dda2e9862d835e25151.png" alt="Result Update 1.1.0"></p> <p>Detail hasil dari Webpack Bundle Analyzer</p> <p><img src="https://telegra.ph/file/cbe7c454e2bcf3ebf04a9.png" alt="Bundle Analyzer"> <em>Webpack Bundle Analyzer update 1.1.0 results</em></p> <p>Akhir kata semoga ilmu nya bermanfaat, sekian terima kasih.</p> <div id="disqus_thread"><div id="disqus_empty"></div></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/nyancodeid/blog/edit/master/tips/reduce-bundle-size-laravel-mix-vue.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">6/5/2020, 5:00:16 PM</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.7e510d46.js" defer></script><script src="/assets/js/2.9f835e0b.js" defer></script><script src="/assets/js/41.564da301.js" defer></script><script src="/assets/js/4.40f398e1.js" defer></script><script src="/assets/js/6.fe87e115.js" defer></script><script src="/assets/js/8.921718ba.js" defer></script>
  </body>
</html>
