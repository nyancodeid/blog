<!DOCTYPE html>
<html lang="id-ID">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Getting Started with PM2 | NyanDev Blog</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/icons/favicon.ico">
    <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="36x36" href="/icons/android-icon-36x36.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
    <link rel="preconnect" href="https://cdn.statically.io">
    <link rel="preconnect" href="https://telegra.ph">
    <script src="https://cdn.statically.io/gh/aFarkas/lazysizes/gh-pages/lazysizes.min.js" async=""></script>
    <link rel="alternate" type="application/rss+xml" href="https://blog.nyandev.id/rss.xml" title="NyanDev Blog RSS Feed">
    <link rel="alternate" type="application/atom+xml" href="https://blog.nyandev.id/feed.atom" title="NyanDev Blog Atom Feed">
    <link rel="alternate" type="application/json" href="https://blog.nyandev.id/feed.json" title="NyanDev Blog JSON Feed">
    <meta name="description" content="Berkenalan dengan PM2, nodejs process manager untuk aplikasi nodejs kalian.">
    <meta name="keywords" content="nodejs,pm2,deployment,production,server">
    <meta property="article:published_time" content="2020-06-07T03:55:23.000Z">
    <meta property="article:modified_time" content="2020-06-07T05:02:27.000Z">
    <meta property="og:site_name" content="NyanDev Blog">
    <meta property="og:title" content="Getting Started with PM2">
    <meta property="og:description" content="Berkenalan dengan PM2, nodejs process manager untuk aplikasi nodejs kalian.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://blog.nyandev.id/devops/getting-started-with-pm2.html">
    <meta property="og:image" content="https://blog.nyandev.id/images/covers/getting-started-with-pm2.jpeg">
    <meta name="twitter:title" content="Getting Started with PM2">
    <meta name="twitter:description" content="Berkenalan dengan PM2, nodejs process manager untuk aplikasi nodejs kalian.">
    <meta name="twitter:url" content="https://blog.nyandev.id/devops/getting-started-with-pm2.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://blog.nyandev.id/images/covers/getting-started-with-pm2.jpeg">
    <meta property="og:image:alt" content="Getting Started with PM2">
    <meta property="og:image:width" content="450">
    <meta property="article:author" content="https://facebook.com/ryan.hac">
    <meta name="theme-color" content="#65c59a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="preload" href="/assets/css/0.styles.32b1d79a.css" as="style"><link rel="preload" href="/assets/js/app.7e510d46.js" as="script"><link rel="preload" href="/assets/js/2.9f835e0b.js" as="script"><link rel="preload" href="/assets/js/19.27096e36.js" as="script"><link rel="preload" href="/assets/js/4.40f398e1.js" as="script"><link rel="preload" href="/assets/js/6.fe87e115.js" as="script"><link rel="preload" href="/assets/js/8.921718ba.js" as="script"><link rel="prefetch" href="/assets/js/10.99d7ed95.js"><link rel="prefetch" href="/assets/js/11.9874722c.js"><link rel="prefetch" href="/assets/js/12.44d458dd.js"><link rel="prefetch" href="/assets/js/13.d175c0bc.js"><link rel="prefetch" href="/assets/js/14.7b0734d4.js"><link rel="prefetch" href="/assets/js/15.93154e45.js"><link rel="prefetch" href="/assets/js/16.57bb0bb9.js"><link rel="prefetch" href="/assets/js/17.fef3c5e9.js"><link rel="prefetch" href="/assets/js/18.d95f131f.js"><link rel="prefetch" href="/assets/js/20.1803883b.js"><link rel="prefetch" href="/assets/js/21.3c882dde.js"><link rel="prefetch" href="/assets/js/22.d4e6a8ab.js"><link rel="prefetch" href="/assets/js/23.e60b0102.js"><link rel="prefetch" href="/assets/js/24.1874fb7b.js"><link rel="prefetch" href="/assets/js/25.3b5a154d.js"><link rel="prefetch" href="/assets/js/26.f52819cd.js"><link rel="prefetch" href="/assets/js/27.3669038a.js"><link rel="prefetch" href="/assets/js/28.5f570948.js"><link rel="prefetch" href="/assets/js/29.694510fc.js"><link rel="prefetch" href="/assets/js/3.4bda5e48.js"><link rel="prefetch" href="/assets/js/30.ab8d1ccf.js"><link rel="prefetch" href="/assets/js/31.ac8d6686.js"><link rel="prefetch" href="/assets/js/32.c1b26e5a.js"><link rel="prefetch" href="/assets/js/33.9309aed6.js"><link rel="prefetch" href="/assets/js/34.3f8ec3a5.js"><link rel="prefetch" href="/assets/js/35.aa42c23e.js"><link rel="prefetch" href="/assets/js/36.12994f0d.js"><link rel="prefetch" href="/assets/js/37.73df454c.js"><link rel="prefetch" href="/assets/js/38.40f46242.js"><link rel="prefetch" href="/assets/js/39.dc358b15.js"><link rel="prefetch" href="/assets/js/40.f736adf1.js"><link rel="prefetch" href="/assets/js/41.564da301.js"><link rel="prefetch" href="/assets/js/42.d273b766.js"><link rel="prefetch" href="/assets/js/5.b7ea8e87.js"><link rel="prefetch" href="/assets/js/7.b95f864c.js"><link rel="prefetch" href="/assets/js/9.8721d71e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.32b1d79a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">NyanDev Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Javascript" class="dropdown-title"><span class="title">Javascript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javascript/" class="nav-link">
  Javascript
</a></li><li class="dropdown-item"><!----> <a href="/preact/" class="nav-link">
  Preact
</a></li><li class="dropdown-item"><!----> <a href="/preact/belajar-preact/" class="nav-link">
  Series: Belajar Preact
</a></li></ul></div></div><div class="nav-item"><a href="/devops/" class="nav-link router-link-active">
  Devops
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Others" class="dropdown-title"><span class="title">Others</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tips/" class="nav-link">
  Tips
</a></li><li class="dropdown-item"><!----> <a href="/informasi/" class="nav-link">
  Informasi
</a></li><li class="dropdown-item"><!----> <a href="/bookmark/" class="nav-link">
  Bookmark
</a></li></ul></div></div> <a href="https://github.com/nyancodeid/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Javascript" class="dropdown-title"><span class="title">Javascript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javascript/" class="nav-link">
  Javascript
</a></li><li class="dropdown-item"><!----> <a href="/preact/" class="nav-link">
  Preact
</a></li><li class="dropdown-item"><!----> <a href="/preact/belajar-preact/" class="nav-link">
  Series: Belajar Preact
</a></li></ul></div></div><div class="nav-item"><a href="/devops/" class="nav-link router-link-active">
  Devops
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Others" class="dropdown-title"><span class="title">Others</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tips/" class="nav-link">
  Tips
</a></li><li class="dropdown-item"><!----> <a href="/informasi/" class="nav-link">
  Informasi
</a></li><li class="dropdown-item"><!----> <a href="/bookmark/" class="nav-link">
  Bookmark
</a></li></ul></div></div> <a href="https://github.com/nyancodeid/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="getting-started-with-pm2"><a href="#getting-started-with-pm2" class="header-anchor">#</a> Getting Started with PM2</h1> <div class="author d-flex"><div class="author-main d-flex"><div class="author-avatar"><img src="/images/profiles/avatar.jpg" alt="Ryan Aunur Rassyid" width="48" height="48"> <!----></div> <div class="author-detail"><div><span>Ryan Aunur Rassyid</span> <div class="author-detail--follow"><button>Follow</button></div></div> <span>June 7, 2020 · 9 min read</span></div></div> <div class="author-social d-flex"><div class="author-social-wrapper d-flex"><div><a href="https://twitter.com/AunurRyan" target="_blank"><svg width="29" height="29" class="q"><path d="M22.05 7.54a4.47 4.47 0 0 0-3.3-1.46 4.53 4.53 0 0 0-4.53 4.53c0 .35.04.7.08 1.05A12.9 12.9 0 0 1 5 6.89a5.1 5.1 0 0 0-.65 2.26c.03 1.6.83 2.99 2.02 3.79a4.3 4.3 0 0 1-2.02-.57v.08a4.55 4.55 0 0 0 3.63 4.44c-.4.08-.8.13-1.21.16l-.81-.08a4.54 4.54 0 0 0 4.2 3.15 9.56 9.56 0 0 1-5.66 1.94l-1.05-.08c2 1.27 4.38 2.02 6.94 2.02 8.3 0 12.86-6.9 12.84-12.85.02-.24 0-.43 0-.65a8.68 8.68 0 0 0 2.26-2.34c-.82.38-1.7.62-2.6.72a4.37 4.37 0 0 0 1.95-2.51c-.84.53-1.81.9-2.83 1.13z"></path></svg></a></div> <div><a href="https://www.facebook.com/ryan.hac" target="_blank"><svg width="29" height="29" class="q"><path d="M23.2 5H5.8a.8.8 0 0 0-.8.8V23.2c0 .44.35.8.8.8h9.3v-7.13h-2.38V13.9h2.38v-2.38c0-2.45 1.55-3.66 3.74-3.66 1.05 0 1.95.08 2.2.11v2.57h-1.5c-1.2 0-1.48.57-1.48 1.4v1.96h2.97l-.6 2.97h-2.37l.05 7.12h5.1a.8.8 0 0 0 .79-.8V5.8a.8.8 0 0 0-.8-.79"></path></svg></a></div> <div><a href="https://medium.com/@ryandevstudio" target="_blank"><svg enable-background="new 0 0 24 24" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m7.996 21.324c0 .695-.521.982-1.098.695l-6.228-3.113c-.188-.089-.346-.238-.475-.447s-.195-.417-.195-.622v-15.227c0-.568.341-.825 1.112-.441l6.844 3.42c.099.099.026-.581.04 15.735zm.857-14.32 7.152 11.568-7.152-3.553zm15.147.241v14.079c0 .223-.062.403-.188.541-.125.138-.295.207-.509.207s-.424-.058-.629-.174l-5.906-2.939zm-.04-1.603c0 .027-1.145 1.895-3.435 5.603s-3.632 5.88-4.025 6.512l-5.223-8.469 4.339-7.039c.236-.388.72-.456 1.045-.294l7.246 3.607c.035.017.053.044.053.08z"></path></svg></a></div></div></div></div> <p class="featured-image"><img alt="Getting Started with PM2" title="Getting Started with PM2 | NyanDev Blog" data-src="/images/covers/getting-started-with-pm2.jpeg" src="/images/covers/getting-started-with-pm2.jpeg" class="no-zoom lazy"> <span class="featured-image--subtitle">(featured image by <u>Jase Bloor</u> on <u><a href="https://unsplash.com/photos/By1VMCg3K4I"   rel="noopener noreferrer" target="_blank">unsplash.com</a></u>)</span></p> <h2 id="introduction"><a href="#introduction" class="header-anchor">#</a> Introduction</h2> <p>Ketika kita bekerja dengan NodeJS kita bisa dengan mudah menjalankan aplikasi yang sudah kita buat sebelumnya. Hanya dengan mengetik perintah <code>node index.js</code> maka aplikasi kita akan berjalan dengan baik. Webserver Express kita berjalan dengan baik dan sesuai dengan ekspektasi kita. Satu atau dua error muncul secara tiba tiba ketika kita memanggil API dengan melibatkan proses yang tidak menentu suksesnya, dan ya kita tinggal menjalankan ulang aplikasinya dan sekarang web server kita kembali online. But wait, gimana kalau aplikasi nodejs ini sudah di deploy di server? apakah kita juga perlu mengecek 24 jam apakah aplikasi kita error dan perlu dijalankan ulang? <em>Arghhh, that's was terrible idea</em>.</p> <p>Ketika aplikasi sudah di deploy ke server, kita mau semua nya berjalan secara autopilot. Kita hanya memantau hasil log sebelumnya atau critical error yang dikirim lewat email atau bot telegram kita. Jadi kita tidak perlu menatap Laptop atau PC sepanjang hari hanya untuk melihat apakah aplikasi kita perlu di-<em>restart</em> atau tidak. Kita perlu aplikasi lain untuk memanage aplikasi-aplikasi node kita.</p> <p>Salah satu dari sekian aplikasi process manager di nodejs ada yang paling mudah digunakan tapi juga powerfull. Ya, namanya <code>PM2</code>. <strong>PM2</strong> adalah daemon process manager yang membantu kita mengelola dan menjaga aplikasi kita agar tetap online. PM2 dioperasikan lewat command line atau berbasis CLI (Command Line Interface) yang sederhana dan intuitif, yang tentu saja di-install lewat NPM juga. <em>Wow, that's really cool</em>.</p> <p>Dalam artikel ini kita akan deep drive untuk berkenalan dengan PM2. <em>Here we go</em>.</p> <h2 id="table-of-contents"><a href="#table-of-contents" class="header-anchor">#</a> Table of Contents</h2> <p></p><div class="table-of-contents"><ul><li><a href="#introduction">Introduction</a></li><li><a href="#table-of-contents">Table of Contents</a></li><li><a href="#why-pm2">Why PM2?</a></li><li><a href="#instalasi">Instalasi</a></li><li><a href="#basic-commands">Basic Commands</a><ul><li><a href="#start">Start</a></li><li><a href="#list-managed-apps">List Managed Apps</a></li><li><a href="#restart">Restart</a></li><li><a href="#stop">Stop</a></li><li><a href="#logs">Logs</a></li><li><a href="#monitoring">Monitoring</a></li><li><a href="#delete">Delete</a></li></ul></li><li><a href="#watch-mode">Watch Mode</a></li><li><a href="#menyimpan-konfigurasi">Menyimpan Konfigurasi</a></li><li><a href="#kesimpulan">Kesimpulan</a></li><li><a href="#referensi">Referensi</a></li></ul></div><p></p> <h2 id="why-pm2"><a href="#why-pm2" class="header-anchor">#</a> Why PM2?</h2> <p>Beberapa dari kalian mungkin bertanya, kenapa harus PM2? kenapa tidak PM-GAN?. Kita tau bahwa kita bisa pakai app atau tool lain kalau ingin aplikasi kita dimuat ulang jika mengalami error. Contohnya saja <code>supervisor</code> atau <code>nodemon</code>, kedua aplikasi tersebut memang terbukti mengatasi masalah kita. Namun kedua aplikasi tersebut menurut penulis hanya cocok dipakai untuk keperluan selama prosess development saja.</p> <p><img src="https://telegra.ph/file/535d76a5718c989e90e1a.png" alt="Perbedaan Apps yang berjalan dengan dan tanpa PM2"> <em>Running PM2 &amp; Node.js in Production Environments - hackernoon.com</em></p> <p>Sedangkan PM2 memiliki fitur yang bukan hanya sekedar file watcher atau reload app saja. Dari beberapa fitur PM2, yang paling berguna saat production adalah:</p> <ul><li><p><code>Restarting after crashes</code>: PM2 memungkinkan kita untuk menjaga agar aplikasi kita tetap berfungsi walaupun app mengalami error atau crash.</p></li> <li><p><code>Monitoring and managing processes remotely</code>: kita tidak melulu memonitoring pm2 lewat CLI saja, kita juga bisa memonitoring nya lewat menggunakan <a href="https://pm2.keymetrics.io/" target="_blank" rel="noopener noreferrer">KeyMetrics<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> contohnya.</p></li> <li><p><code>It doesn’t just run Node apps</code>: PM2 tidak terbatas hanya untuk NodeJS saja, kamu bisa menjalankan PHP Worker, atau aplikasi yang membutuhkan PM2 sebagai proccess managernya.</p></li> <li><p><code>Restart-Persistance</code>: PM2 bisa menyimpan dan mengingat aplikasi mana saja yang berjalan padanya dan memulai kembali dengan segera, ketika server mengalami restart atau kembali hidup.</p></li></ul> <p>Dan masih banyak lagi, seperti Logs, PM2 API, Cluster, Fork, Environment dan lain sebagainya.</p> <h2 id="instalasi"><a href="#instalasi" class="header-anchor">#</a> Instalasi</h2> <p>PM2 bisa di-install menggunakan NPM atau Yarn secara global maupun local project (PM2 API).</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">npm</span> <span class="token function">install</span> pm2@latest -g
<span class="token comment"># or</span>
$ <span class="token function">yarn</span> global <span class="token function">add</span> pm2
</code></pre></div><h2 id="basic-commands"><a href="#basic-commands" class="header-anchor">#</a> Basic Commands</h2> <p>Kita mulai perkenalan PM2 dengan basic command yang sering dipakai untuk memulai, mengulang, memberhentikan, dan menampilkan logs aplikasi. Untuk berinteraksi dengan PM2 kamu bisa menggunakan perintah CLI atau menggunakan configuration file seperti JSON, Javascript, dan YAML. Untuk kali ini karena kita mau berkenalan dengan PM2 kita bahas yang CLI dulu supaya paham bagaimana alur kerja dan sekaligus mebiasakan diri dengan PM2.</p> <h3 id="start"><a href="#start" class="header-anchor">#</a> Start</h3> <p>Untuk menjalankan aplikasi nodejs anda tinggal memanggil perintah berikut. Perlu dicatat kalau kita perlu menambahkan param <code>--name</code> untuk memudahkan kita dalam mengenali aplikasi kita.</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ pm2 start index.js --name app_name
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>PM2<span class="token punctuation">]</span> Starting /path/to/project/src/index.js <span class="token keyword">in</span> fork_mode <span class="token punctuation">(</span><span class="token number">1</span> instance<span class="token punctuation">)</span>
<span class="token punctuation">[</span>PM2<span class="token punctuation">]</span> Done.
┌──────────┬────┬─────────┬──────┬──────┬────────┬─────────┬────────┬─────┬───────────┬───────────┬──────────┐
│ App name │ <span class="token function">id</span> │ version │ mode │ pid  │ status │ restart │ <span class="token function">uptime</span> │ cpu │ mem       │ user      │ watching │
├──────────┼────┼─────────┼──────┼──────┼────────┼─────────┼────────┼─────┼───────────┼───────────┼──────────┤
│ app_name │ <span class="token number">0</span>  │ <span class="token number">1.0</span>.0   │ fork │ <span class="token number">1145</span> │ online │ <span class="token number">0</span>       │ 0s     │ <span class="token number">0</span>%  │ <span class="token number">32.3</span> MB   │ ryanaunur │ disabled │
└──────────┴────┴─────────┴──────┴──────┴────────┴─────────┴────────┴─────┴───────────┴───────────┴──────────┘
 Use <span class="token variable"><span class="token variable">`</span>pm2 show <span class="token operator">&lt;</span>id<span class="token operator">|</span>name<span class="token operator">&gt;</span><span class="token variable">`</span></span> to get <span class="token function">more</span> details about an app
</code></pre></div><h3 id="list-managed-apps"><a href="#list-managed-apps" class="header-anchor">#</a> List Managed Apps</h3> <p>Untuk melihat aplikasi apa yang sedang berjalan pada PM2 kita bisa panggil perintah berikut. Ada 3 opsi silahkan pilih tergantung anda nyaman menggunakan perintah yang mana. bisa pakai <code>list</code>, <code>ls</code>, atau <code>status</code> semua nya sama.</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ pm2 <span class="token operator">&lt;</span>list<span class="token operator">|</span><span class="token function">ls</span><span class="token operator">|</span>status<span class="token operator">&gt;</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code>┌──────────┬────┬─────────┬──────┬──────┬────────┬─────────┬────────┬──────┬───────────┬───────────┬──────────┐
│ App name │ <span class="token function">id</span> │ version │ mode │ pid  │ status │ restart │ <span class="token function">uptime</span> │ cpu  │ mem       │ user      │ watching │
├──────────┼────┼─────────┼──────┼──────┼────────┼─────────┼────────┼──────┼───────────┼───────────┼──────────┤
│ app_name │ <span class="token number">0</span>  │ <span class="token number">1.0</span>.0   │ fork │ <span class="token number">1145</span> │ online │ <span class="token number">0</span>       │ 2m     │ <span class="token number">0.2</span>% │ <span class="token number">44.5</span> MB   │ ryanaunur │ disabled │
└──────────┴────┴─────────┴──────┴──────┴────────┴─────────┴────────┴──────┴───────────┴───────────┴──────────┘
 Use <span class="token variable"><span class="token variable">`</span>pm2 show <span class="token operator">&lt;</span>id<span class="token operator">|</span>name<span class="token operator">&gt;</span><span class="token variable">`</span></span> to get <span class="token function">more</span> details about an app
</code></pre></div><h3 id="restart"><a href="#restart" class="header-anchor">#</a> Restart</h3> <p>Karena aplikasi kita tidak akan berefek ketika ada perubahan script sebelum aplikasi di-restart maka kita harus melakukkan restart pada PM2 dengan perintah dibawah ini. Namun jika anda menambahkan param <code>--watch</code>, maka PM2 akan melihat setiap perubahan app dan langsung secara otomatis akan memuat ulang aplikasi kita dengan script terbaru yang diubah tadi.</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ pm2 restart <span class="token operator">&lt;</span>app_name<span class="token operator">|</span><span class="token function">id</span><span class="token operator">|</span>all<span class="token operator">&gt;</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>PM2<span class="token punctuation">]</span> Applying action restartProcessId on app <span class="token punctuation">[</span>app_name<span class="token punctuation">]</span><span class="token punctuation">(</span>ids: <span class="token punctuation">[</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span>PM2<span class="token punctuation">]</span> <span class="token punctuation">[</span>app_name<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> ✓
┌──────────┬────┬─────────┬──────┬──────┬────────┬─────────┬────────┬─────┬───────────┬───────────┬──────────┐
│ App name │ <span class="token function">id</span> │ version │ mode │ pid  │ status │ restart │ <span class="token function">uptime</span> │ cpu │ mem       │ user      │ watching │
├──────────┼────┼─────────┼──────┼──────┼────────┼─────────┼────────┼─────┼───────────┼───────────┼──────────┤
│ app_name │ <span class="token number">0</span>  │ <span class="token number">1.0</span>.0   │ fork │ <span class="token number">1919</span> │ online │ <span class="token number">1</span>       │ 0s     │ <span class="token number">0</span>%  │ <span class="token number">18.5</span> MB   │ ryanaunur │ disabled │
└──────────┴────┴─────────┴──────┴──────┴────────┴─────────┴────────┴─────┴───────────┴───────────┴──────────┘
 Use <span class="token variable"><span class="token variable">`</span>pm2 show <span class="token operator">&lt;</span>id<span class="token operator">|</span>name<span class="token operator">&gt;</span><span class="token variable">`</span></span> to get <span class="token function">more</span> details about an app
</code></pre></div><h3 id="stop"><a href="#stop" class="header-anchor">#</a> Stop</h3> <p>Untuk menghentikan aplikasi kamu tinggal menggunakan perintah <code>stop</code>.</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ pm2 stop <span class="token operator">&lt;</span>app_name<span class="token operator">|</span><span class="token function">id</span><span class="token operator">|</span>all<span class="token operator">&gt;</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>PM2<span class="token punctuation">]</span> Applying action stopProcessId on app <span class="token punctuation">[</span>app_name<span class="token punctuation">]</span><span class="token punctuation">(</span>ids: <span class="token punctuation">[</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span>PM2<span class="token punctuation">]</span> <span class="token punctuation">[</span>app_name<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> ✓
┌──────────┬────┬─────────┬──────┬─────┬─────────┬─────────┬────────┬─────┬────────┬───────────┬──────────┐
│ App name │ <span class="token function">id</span> │ version │ mode │ pid │ status  │ restart │ <span class="token function">uptime</span> │ cpu │ mem    │ user      │ watching │
├──────────┼────┼─────────┼──────┼─────┼─────────┼─────────┼────────┼─────┼────────┼───────────┼──────────┤
│ app_name │ <span class="token number">0</span>  │ <span class="token number">1.0</span>.0   │ fork │ <span class="token number">0</span>   │ stopped │ <span class="token number">1</span>       │ <span class="token number">0</span>      │ <span class="token number">0</span>%  │ <span class="token number">0</span> B    │ ryanaunur │ disabled │
└──────────┴────┴─────────┴──────┴─────┴─────────┴─────────┴────────┴─────┴────────┴───────────┴──────────┘
 Use <span class="token variable"><span class="token variable">`</span>pm2 show <span class="token operator">&lt;</span>id<span class="token operator">|</span>name<span class="token operator">&gt;</span><span class="token variable">`</span></span> to get <span class="token function">more</span> details about an app
</code></pre></div><h3 id="logs"><a href="#logs" class="header-anchor">#</a> Logs</h3> <p>Untuk melihat logs yang dihasilkan dari aplikasi yang berjalan pada PM2 kamu bisa menggunakan perintah <code>logs</code>.</p> <p><img src="https://telegra.ph/file/a17894336bb460b3a466c.png" alt="Log Management"> <em>Running PM2 &amp; Node.js in Production Environments - hackernoon.com</em></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># display spesific app logs</span>
$ pm2 logs app_name
<span class="token comment"># display 100 lines of standart and error output logs</span>
$ pm2 logs app_name --lines <span class="token number">100</span>
<span class="token comment"># display standart output logs only</span>
$ pm2 logs app_name --out
<span class="token comment"># display error output logs only</span>
$ pm2 logs app_name --err
<span class="token comment"># Flush app logs</span>
$ pm2 flush <span class="token operator">&lt;</span>app_name<span class="token operator">&gt;</span>
<span class="token comment"># or all</span>
$ pm2 logs all
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>TAILING<span class="token punctuation">]</span> Tailing last <span class="token number">15</span> lines <span class="token keyword">for</span> <span class="token punctuation">[</span>app_name<span class="token punctuation">]</span> process <span class="token punctuation">(</span>change the value with --lines option<span class="token punctuation">)</span>
/<span class="token environment constant">$HOME</span>/.pm2/logs/app-name-error.log last <span class="token number">15</span> lines:
/<span class="token environment constant">$HOME</span>/.pm2/logs/app-name-out.log last <span class="token number">15</span> lines:
<span class="token number">0</span><span class="token operator">|</span>app_name <span class="token operator">|</span> Listening on new task<span class="token operator">!</span>
<span class="token number">0</span><span class="token operator">|</span>app_name <span class="token operator">|</span> Listening on new task<span class="token operator">!</span>
<span class="token number">0</span><span class="token operator">|</span>app_name <span class="token operator">|</span> Listening on new task<span class="token operator">!</span>
</code></pre></div><h3 id="monitoring"><a href="#monitoring" class="header-anchor">#</a> Monitoring</h3> <p>Memonitoring penggunaan resouce tiap apps, dan log dari aplikasi secara bersamaan kamu bisa menggunakan perintah <code>monit</code>.</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ pm2 monit
</code></pre></div><p><img src="/images/posts/pm2-monit-ss.png" alt="PM2 Monit"> <em>PM2 Monitoring Result</em></p> <h3 id="delete"><a href="#delete" class="header-anchor">#</a> Delete</h3> <p>Terakhir untuk menghapus aplikasi mu dari daftar PM2 maka kamu tinggal jalankan perintah <code>delete</code>.</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ pm2 delete <span class="token operator">&lt;</span>app_name<span class="token operator">|</span><span class="token function">id</span><span class="token operator">|</span>all<span class="token operator">&gt;</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>PM2<span class="token punctuation">]</span> Applying action deleteProcessId on app <span class="token punctuation">[</span>app_name<span class="token punctuation">]</span><span class="token punctuation">(</span>ids: <span class="token punctuation">[</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span>PM2<span class="token punctuation">]</span> <span class="token punctuation">[</span>app_name<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> ✓
┌──────────┬────┬─────────┬──────┬─────┬────────┬─────────┬────────┬─────┬─────┬──────┬──────────┐
│ App name │ <span class="token function">id</span> │ version │ mode │ pid │ status │ restart │ <span class="token function">uptime</span> │ cpu │ mem │ user │ watching │
└──────────┴────┴─────────┴──────┴─────┴────────┴─────────┴────────┴─────┴─────┴──────┴──────────┘
 Use <span class="token variable"><span class="token variable">`</span>pm2 show <span class="token operator">&lt;</span>id<span class="token operator">|</span>name<span class="token operator">&gt;</span><span class="token variable">`</span></span> to get <span class="token function">more</span> details about an app
</code></pre></div><h2 id="watch-mode"><a href="#watch-mode" class="header-anchor">#</a> Watch Mode</h2> <p>Untuk memungkinkan PM2 menanggapi setiap perubahan file yang ada pada aplikasi anda dan melakukkan restart otomatis atas perubahan tersebut maka kamu perlu menambahkan param <code>--watch</code>. Sedangkan untuk mengabaikan perubahan yang ada pada folder tertentu kamu tinggal menambahkan param <code>--ignore-watch=&quot;folder,folder&quot;</code>.</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ pm2 start index.js --name app_name --watch
<span class="token comment"># exclude node_modules from watched file</span>
$ pm2 start index.js --name app_name --watch --ignore-watch<span class="token operator">=</span><span class="token string">&quot;node_modules&quot;</span>
</code></pre></div><h2 id="menyimpan-konfigurasi"><a href="#menyimpan-konfigurasi" class="header-anchor">#</a> Menyimpan Konfigurasi</h2> <p>Secara default PM2 tidak akan menyimpan daftar aplikasi yang berjalan padanya sebelum anda menyimpannya. Kita perlu menyimpan daftar aplikasi jika kamu tidak ingin ketika server kamu restart dan daftar pm2 hilang dan kamu perlu menjalankan nya kembali satu persatu.</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ pm2 save
</code></pre></div><p>Nah daftar aplikasi kita sudah disimpan oleh PM2. Sekarang jika kamu ingin PM2 menjalankan aplikasi yang sudah disimpan tadi tepat ketika server menyala maka kamu perlu membuat nya berjalan ketika <em>startup</em>. Dengan menjalankan perintah <code>startup</code> berikut.</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ pm2 startup
<span class="token comment"># manually chose startup script</span>
$ pm2 startup <span class="token punctuation">[</span>ubuntu <span class="token operator">|</span> ubuntu14 <span class="token operator">|</span> ubuntu12 <span class="token operator">|</span> centos <span class="token operator">|</span> centos6 <span class="token operator">|</span> arch <span class="token operator">|</span> oracle <span class="token operator">|</span> amazon <span class="token operator">|</span> macos <span class="token operator">|</span> darwin <span class="token operator">|</span> freebsd <span class="token operator">|</span> systemd <span class="token operator">|</span> systemv <span class="token operator">|</span> upstart <span class="token operator">|</span> launchd <span class="token operator">|</span> rcd <span class="token operator">|</span> openrc<span class="token punctuation">]</span>
</code></pre></div><p>Secara otomatis pm2 akan menjalankan daemon (service) sesuai dengan Operating System yang kita pakai. Karena setiap OS dan versi nya memiliki konfigurasi sendiri terutama windows, bagi kalian pengguna window mungkin perlu menggunakan tool tambahan karena miliki cara sendiri dalam mengkonfigurasi startup.</p> <div class="custom-block warning"><p class="custom-block-title">Windows User</p> <p>There are some external libraries to generate a Windows compatible startup script, please checkout <a href="https://www.npmjs.com/package/pm2-windows-service" target="_blank" rel="noopener noreferrer">pm2-windows-service<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> or <a href="https://www.npmjs.com/package/pm2-windows-startup" target="_blank" rel="noopener noreferrer">pm2-windows-startup<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p></div> <h2 id="kesimpulan"><a href="#kesimpulan" class="header-anchor">#</a> Kesimpulan</h2> <p>Dengan adanya aplikasi atau tools untuk memanage aplikasi kita akan sangat memudahkan pekerjakan kita dalam memonitoring aplikasi kita diserver. Karena server akan terus berjalan maka kita juga perlu menjaga agar aplikasi kita berjalan terus tanpa kendala serius.</p> <p>PM2 membantu kita dalam mewujudkan bagaimana cara memperlakukkan aplikasi kita dengan berbeda ketika dalam lingkungan production yang mewajibkan kita untuk <strong>Zero Down Time</strong> dan memonitoring aplikasi dengan cara yang mudah. Diartikel selanjutnya kita akan belajar bagimana cara berinteraksi dengan PM2 dengan menggunakan konfigurasi file seperti JSON, Javascript, dan YAML. <em>See you next time</em>.</p> <h2 id="referensi"><a href="#referensi" class="header-anchor">#</a> Referensi</h2> <a href="https://www.digitalocean.com/community/tutorials/nodejs-pm2" target="_blank" class="link-preview"><div class="link-preview--content"><p class="title">Getting Started with PM2, the Node.js Process Manager | DigitalOcean</p><p>Learn the very basics of the PM2 production process manager. See what it can do for you and how to get started with using it.</p> <p>www.digitalocean.com</p></div><div class="link-preview--thumbnail" style="background-image:url(https://www.digitalocean.com/assets/community/illustrations/DigitalOcean_Community-e00e73a18df20667c3117725e727f3ade330204dff619ad8153050ded7341627.jpg);"></div></a><a href="https://pm2.keymetrics.io/docs/usage/quick-start/" target="_blank" class="link-preview"><div class="link-preview--content"><p class="title">PM2 - Quick Start</p><p>Advanced process manager for production Node.js applications. Load balancer, logs facility, startup script, micro service management, at a glance.</p> <p>pm2.keymetrics.io</p></div><div class="link-preview--thumbnail" style="background-image:url(https://raw.githubusercontent.com/unitech/pm2/master/pres/pm2.20d3ef.png);"></div></a><a href="https://hackernoon.com/running-pm2-node-js-in-production-environments-13e703fc108a" target="_blank" class="link-preview"><div class="link-preview--content"><p class="title">Running PM2 &amp; Node.js in Production Environments | Hacker Noon</p><p>PM2 is a battle tested, production ready runtime and process manager for Node.js applications.</p> <p>hackernoon.com</p></div><div class="link-preview--thumbnail" style="background-image:url(https://hackernoon.com/Devimg/story-image-default.png);"></div></a><div id="disqus_thread"><div id="disqus_empty"></div></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/nyancodeid/blog/edit/master/devops/getting-started-with-pm2.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">6/7/2020, 12:02:27 PM</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.7e510d46.js" defer></script><script src="/assets/js/2.9f835e0b.js" defer></script><script src="/assets/js/19.27096e36.js" defer></script><script src="/assets/js/4.40f398e1.js" defer></script><script src="/assets/js/6.fe87e115.js" defer></script><script src="/assets/js/8.921718ba.js" defer></script>
  </body>
</html>
