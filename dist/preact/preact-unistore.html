<!DOCTYPE html>
<html lang="id-ID">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Unistore: State Management Mudah untuk Preact App | NyanDev Blog</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/icons/favicon.ico">
    <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="36x36" href="/icons/android-icon-36x36.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
    <link rel="preconnect" href="https://cdn.statically.io">
    <link rel="preconnect" href="https://telegra.ph">
    <script src="https://cdn.statically.io/gh/aFarkas/lazysizes/gh-pages/lazysizes.min.js" async=""></script>
    <link rel="alternate" type="application/rss+xml" href="https://blog.nyandev.id/rss.xml" title="NyanDev Blog RSS Feed">
    <link rel="alternate" type="application/atom+xml" href="https://blog.nyandev.id/feed.atom" title="NyanDev Blog Atom Feed">
    <link rel="alternate" type="application/json" href="https://blog.nyandev.id/feed.json" title="NyanDev Blog JSON Feed">
    <meta name="description" content="Mari berkenal dengan Unistore, state container yang mensentralkan state dengan memanfaatkan component binding.">
    <meta name="keywords" content="preact,unistore,state,management,react">
    <meta property="article:published_time" content="2020-01-17T03:06:21.000Z">
    <meta property="article:modified_time" content="2020-02-20T12:47:25.000Z">
    <meta property="og:site_name" content="NyanDev Blog">
    <meta property="og:title" content="Unistore: State Management Mudah untuk Preact App">
    <meta property="og:description" content="Mari berkenal dengan Unistore, state container yang mensentralkan state dengan memanfaatkan component binding.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://blog.nyandev.id/preact/preact-unistore.html">
    <meta property="og:image" content="https://blog.nyandev.id/images/covers/preact-unistore--nyandev-blog.png">
    <meta name="twitter:title" content="Unistore: State Management Mudah untuk Preact App">
    <meta name="twitter:description" content="Mari berkenal dengan Unistore, state container yang mensentralkan state dengan memanfaatkan component binding.">
    <meta name="twitter:url" content="https://blog.nyandev.id/preact/preact-unistore.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://blog.nyandev.id/images/covers/preact-unistore--nyandev-blog.png">
    <meta property="og:image:alt" content="Unistore: State Management Mudah untuk Preact App">
    <meta property="og:image:width" content="450">
    <meta property="article:author" content="https://facebook.com/ryan.hac">
    <meta name="theme-color" content="#65c59a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="preload" href="/assets/css/0.styles.32b1d79a.css" as="style"><link rel="preload" href="/assets/js/app.7e510d46.js" as="script"><link rel="preload" href="/assets/js/2.9f835e0b.js" as="script"><link rel="preload" href="/assets/js/35.aa42c23e.js" as="script"><link rel="preload" href="/assets/js/4.40f398e1.js" as="script"><link rel="preload" href="/assets/js/6.fe87e115.js" as="script"><link rel="preload" href="/assets/js/8.921718ba.js" as="script"><link rel="prefetch" href="/assets/js/10.99d7ed95.js"><link rel="prefetch" href="/assets/js/11.9874722c.js"><link rel="prefetch" href="/assets/js/12.44d458dd.js"><link rel="prefetch" href="/assets/js/13.d175c0bc.js"><link rel="prefetch" href="/assets/js/14.7b0734d4.js"><link rel="prefetch" href="/assets/js/15.93154e45.js"><link rel="prefetch" href="/assets/js/16.57bb0bb9.js"><link rel="prefetch" href="/assets/js/17.fef3c5e9.js"><link rel="prefetch" href="/assets/js/18.d95f131f.js"><link rel="prefetch" href="/assets/js/19.27096e36.js"><link rel="prefetch" href="/assets/js/20.1803883b.js"><link rel="prefetch" href="/assets/js/21.3c882dde.js"><link rel="prefetch" href="/assets/js/22.d4e6a8ab.js"><link rel="prefetch" href="/assets/js/23.e60b0102.js"><link rel="prefetch" href="/assets/js/24.1874fb7b.js"><link rel="prefetch" href="/assets/js/25.3b5a154d.js"><link rel="prefetch" href="/assets/js/26.f52819cd.js"><link rel="prefetch" href="/assets/js/27.3669038a.js"><link rel="prefetch" href="/assets/js/28.5f570948.js"><link rel="prefetch" href="/assets/js/29.694510fc.js"><link rel="prefetch" href="/assets/js/3.4bda5e48.js"><link rel="prefetch" href="/assets/js/30.ab8d1ccf.js"><link rel="prefetch" href="/assets/js/31.ac8d6686.js"><link rel="prefetch" href="/assets/js/32.c1b26e5a.js"><link rel="prefetch" href="/assets/js/33.9309aed6.js"><link rel="prefetch" href="/assets/js/34.3f8ec3a5.js"><link rel="prefetch" href="/assets/js/36.12994f0d.js"><link rel="prefetch" href="/assets/js/37.73df454c.js"><link rel="prefetch" href="/assets/js/38.40f46242.js"><link rel="prefetch" href="/assets/js/39.dc358b15.js"><link rel="prefetch" href="/assets/js/40.f736adf1.js"><link rel="prefetch" href="/assets/js/41.564da301.js"><link rel="prefetch" href="/assets/js/42.d273b766.js"><link rel="prefetch" href="/assets/js/5.b7ea8e87.js"><link rel="prefetch" href="/assets/js/7.b95f864c.js"><link rel="prefetch" href="/assets/js/9.8721d71e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.32b1d79a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">NyanDev Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Javascript" class="dropdown-title"><span class="title">Javascript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javascript/" class="nav-link">
  Javascript
</a></li><li class="dropdown-item"><!----> <a href="/preact/" class="nav-link router-link-active">
  Preact
</a></li><li class="dropdown-item"><!----> <a href="/preact/belajar-preact/" class="nav-link">
  Series: Belajar Preact
</a></li></ul></div></div><div class="nav-item"><a href="/devops/" class="nav-link">
  Devops
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Others" class="dropdown-title"><span class="title">Others</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tips/" class="nav-link">
  Tips
</a></li><li class="dropdown-item"><!----> <a href="/informasi/" class="nav-link">
  Informasi
</a></li><li class="dropdown-item"><!----> <a href="/bookmark/" class="nav-link">
  Bookmark
</a></li></ul></div></div> <a href="https://github.com/nyancodeid/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Javascript" class="dropdown-title"><span class="title">Javascript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javascript/" class="nav-link">
  Javascript
</a></li><li class="dropdown-item"><!----> <a href="/preact/" class="nav-link router-link-active">
  Preact
</a></li><li class="dropdown-item"><!----> <a href="/preact/belajar-preact/" class="nav-link">
  Series: Belajar Preact
</a></li></ul></div></div><div class="nav-item"><a href="/devops/" class="nav-link">
  Devops
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Others" class="dropdown-title"><span class="title">Others</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tips/" class="nav-link">
  Tips
</a></li><li class="dropdown-item"><!----> <a href="/informasi/" class="nav-link">
  Informasi
</a></li><li class="dropdown-item"><!----> <a href="/bookmark/" class="nav-link">
  Bookmark
</a></li></ul></div></div> <a href="https://github.com/nyancodeid/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="unistore-state-management-mudah-untuk-preact-app"><a href="#unistore-state-management-mudah-untuk-preact-app" class="header-anchor">#</a> Unistore: State Management Mudah untuk Preact App</h1> <div class="author d-flex"><div class="author-main d-flex"><div class="author-avatar"><img src="/images/profiles/avatar.jpg" alt="Ryan Aunur Rassyid" width="48" height="48"> <!----></div> <div class="author-detail"><div><span>Ryan Aunur Rassyid</span> <div class="author-detail--follow"><button>Follow</button></div></div> <span>Jan 17, 2020 · 9 min read</span></div></div> <div class="author-social d-flex"><div class="author-social-wrapper d-flex"><div><a href="https://twitter.com/AunurRyan" target="_blank"><svg width="29" height="29" class="q"><path d="M22.05 7.54a4.47 4.47 0 0 0-3.3-1.46 4.53 4.53 0 0 0-4.53 4.53c0 .35.04.7.08 1.05A12.9 12.9 0 0 1 5 6.89a5.1 5.1 0 0 0-.65 2.26c.03 1.6.83 2.99 2.02 3.79a4.3 4.3 0 0 1-2.02-.57v.08a4.55 4.55 0 0 0 3.63 4.44c-.4.08-.8.13-1.21.16l-.81-.08a4.54 4.54 0 0 0 4.2 3.15 9.56 9.56 0 0 1-5.66 1.94l-1.05-.08c2 1.27 4.38 2.02 6.94 2.02 8.3 0 12.86-6.9 12.84-12.85.02-.24 0-.43 0-.65a8.68 8.68 0 0 0 2.26-2.34c-.82.38-1.7.62-2.6.72a4.37 4.37 0 0 0 1.95-2.51c-.84.53-1.81.9-2.83 1.13z"></path></svg></a></div> <div><a href="https://www.facebook.com/ryan.hac" target="_blank"><svg width="29" height="29" class="q"><path d="M23.2 5H5.8a.8.8 0 0 0-.8.8V23.2c0 .44.35.8.8.8h9.3v-7.13h-2.38V13.9h2.38v-2.38c0-2.45 1.55-3.66 3.74-3.66 1.05 0 1.95.08 2.2.11v2.57h-1.5c-1.2 0-1.48.57-1.48 1.4v1.96h2.97l-.6 2.97h-2.37l.05 7.12h5.1a.8.8 0 0 0 .79-.8V5.8a.8.8 0 0 0-.8-.79"></path></svg></a></div> <div><a href="https://medium.com/@ryandevstudio" target="_blank"><svg enable-background="new 0 0 24 24" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m7.996 21.324c0 .695-.521.982-1.098.695l-6.228-3.113c-.188-.089-.346-.238-.475-.447s-.195-.417-.195-.622v-15.227c0-.568.341-.825 1.112-.441l6.844 3.42c.099.099.026-.581.04 15.735zm.857-14.32 7.152 11.568-7.152-3.553zm15.147.241v14.079c0 .223-.062.403-.188.541-.125.138-.295.207-.509.207s-.424-.058-.629-.174l-5.906-2.939zm-.04-1.603c0 .027-1.145 1.895-3.435 5.603s-3.632 5.88-4.025 6.512l-5.223-8.469 4.339-7.039c.236-.388.72-.456 1.045-.294l7.246 3.607c.035.017.053.044.053.08z"></path></svg></a></div></div></div></div> <p class="featured-image"><img alt="Unistore: State Management Mudah untuk Preact App" title="Unistore: State Management Mudah untuk Preact App | NyanDev Blog" data-src="/images/covers/preact-unistore--nyandev-blog.png" src="/images/covers/preact-unistore--nyandev-blog.png" class="no-zoom lazy"> <span class="featured-image--subtitle">(source <u><a href="https://unsplash.com" rel="noopener noreferrer" target="_blank">unsplash.com</a></u>)</span></p> <blockquote><p>A tiny 350b centralized state container with component bindings for <a href="https://github.com/developit/preact" target="_blank" rel="noopener noreferrer">Preact<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> &amp; <a href="https://github.com/facebook/react" target="_blank" rel="noopener noreferrer">React<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p></blockquote> <p></p><div class="table-of-contents"><ul><li><a href="#state-management">State Management</a></li><li><a href="#unistore">Unistore</a></li><li><a href="#konsep">Konsep</a><ul><li><a href="#store">Store</a></li><li><a href="#action">Action</a></li></ul></li><li><a href="#install">Install</a></li><li><a href="#penggunaan">Penggunaan</a><ul><li><a href="#mendefinisikan-store">Mendefinisikan Store</a></li><li><a href="#menghubungkan-store">Menghubungkan Store</a></li><li><a href="#pemanggilan-action">Pemanggilan Action</a></li></ul></li><li><a href="#contoh">Contoh</a></li><li><a href="#kesimpulan">Kesimpulan</a></li><li><a href="#referensi">Referensi</a></li></ul></div><p></p> <h2 id="state-management"><a href="#state-management" class="header-anchor">#</a> State Management</h2> <p>Dalam membangun sebuah web app kita akan dihadapkan dengan beberapa permasalah dalam mengatur <em><strong>state</strong></em>. Ya state, mungkin untuk 2-5 komponen yang kita buat tidak akan menimbulkan masalah saat proses development. Namun, permasalah ini akan muncul ketika kamu sudah memiliki banyak komponen yang saling membutuhkan state satu sama lain.</p> <p>Kita tau bahwa management state yang dilakukkan sebelumnya yaitu melempar <em><strong>state</strong></em> ke <em><strong>props</strong></em> akan mudah di pahami dalam pengenalan konsep state. Siapa yang tidak tau dengan cara pengenalan state yang disajikan dengan membuat aplikasi increment sederhana. Namun kita harus tau bahwa ini adalah cara sederhana menjelaskan konsep state dan project yang akan kita bangun tidak akan sesederhana itu.</p> <p>Menurut <a href="https://degananda.com/react-state-props-lifecycle/" target="_blank" rel="noopener noreferrer">deganda.com<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> di pembahasan tentang apa itu state, props dan lifecycle di jelaskan. <em><strong>State</strong></em> dan <em><strong>props</strong></em> merupakan dua jenis data yang dapat digunakan oleh komponen. <em><strong>Props</strong></em> merupakan data yang fix (karena diambil dari parent atau di set oleh parent dari komponen tersebut). Sedangkan state digunakan untuk data yang berubah. State akan di inisiasi pada constructor(<em>dynamic</em>) sedangkan props menjadi parameter pada construtor sehingga tidak dapat berubah (<em>fixed</em>).</p> <h2 id="unistore"><a href="#unistore" class="header-anchor">#</a> Unistore</h2> <p>Dalam penerapan state management, Preact bisa dipadukan dengan library state management contohnya Redux, RxJS atau Statty. Namun ada module atau libarary yang ditulis oleh pembuat Preact sendiri dengan lebih simple dan berukuran kecil namun tidak mengurangi fungsi state management itu sendiri.</p> <p>Alih-alih menggunakan Redux (<a href="https://github.com/developit/preact-redux" target="_blank" rel="noopener noreferrer"><em>preact-redux</em><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>) yang sebenernya bisa tapi karena dukungan untuk Preact X belum ada jadi unistore jadi pilihan nya.</p> <div class="custom-block warning"><p class="custom-block-title">Compatibility Note:</p> <p>If you're using Preact X (preact@10+), please use the official react-redux library.</p></div> <p>Jadi sederhanya Unistore merupakan sebuah state management yg mana tugasnya sebagai <strong>centralized store</strong> untuk semua component dalam aplikasi preact/react.</p> <h2 id="konsep"><a href="#konsep" class="header-anchor">#</a> Konsep</h2> <p>Karena unistore adalah module sederhana yang dibuat dengan prinsip yang sama dengan Redux, jadi konsep dasar State Management nya hampir sama dengan Redux.</p> <p><img src="https://telegra.ph/file/d5858dde9444919de5f41.png" alt="Global State - itnext.io"> <em>Global State pada Redux - itnext.io</em></p> <p>Jika digambarkan secara sederhana maka unistore adalah database sederhana untuk front-end. Layaknya database kita bisa melakukkan operasi CRUD (Create-Read-Update-Delete) pada unistore ini. Kita juga bisa memprosess atau memanipulasi nilai yang akan di-<em>return</em> (dikembalikan) oleh action. Konsep ini sangatlah sederhana jika kalian sudah mengetahui atau mereasakan kekurangan dari <em>state</em> itu sendiri.</p> <p><strong>State management</strong> ini sendiri dibuat atas permasalahn ketika kita sudah memiliki banyak child component yang saling membutuhkan nilai state pada parent component atau bahkan diatasnya. Coba bayangkan kalau component product yang jauh dibawah membutuhkan nilai state nama user yang ada jauh diatasnya. Cara yang biasa kita lakukkan adalah mempasing nilai state tersebut melalui <code>props</code> kan.</p> <p><img src="https://telegra.ph/file/884e19a28c553b005023b.png" alt="Perbedaan Menggunakan State Management"> <em>Perbedaan Menggunakan State Management - css-tricks.com</em></p> <p>Cara ini memang tidak ada masalah, semua bekerja dengan baik. Tapi jika child component sudah mengakar panjang kebawah? ini lah kenapa konsep State Management oleh Redux diperkenalkan. Konsep state management sendiri banyak caranya, namun yang paling dikenal adalah Redux itu sendiri.</p> <p>Dalam unistore terdapat 2 komponen penting, yaitu</p> <ol><li>Store</li> <li>Actions</li></ol> <h3 id="store"><a href="#store" class="header-anchor">#</a> Store</h3> <p>Store bertugas sebagai menyimpan keseluruhan <em>state</em> yang di-inisialiasi pada awal pembuatannya menggunakan method <code>createStore</code>.</p> <blockquote><p>An observable state container, returned from <code>createStore</code></p></blockquote> <h4 id="membuat-store"><a href="#membuat-store" class="header-anchor">#</a> Membuat Store</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> createStore <span class="token keyword">from</span> <span class="token string">'unistore'</span>

<span class="token keyword">let</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token punctuation">{</span> todos<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> nama<span class="token operator">:</span> <span class="token string">&quot;NyanDev Indonesia&quot;</span> <span class="token comment">// inisialiasi state awal })</span>
</code></pre></div><h3 id="action"><a href="#action" class="header-anchor">#</a> Action</h3> <p>Action bertugas sebagai penghubung ketika kamu ingin merubah atau memanipulasi state dalam store. Jika kamu mengenal Action dan Reducer didalam Redux, maka didalam unistore ini Functional action hanyalah <em>reducer</em>. Jadi kamu tidak perlu lagi menggunakan <code>dispact</code> untuk memanggil <em>actions</em>. Karena nantinya <em>actions</em> akan dihubungkan dalam component melalui <em>props</em>.</p> <blockquote><p><strong>Functional</strong> actions are just reducers</p></blockquote> <blockquote><p>Create a bound copy of the given action function. The bound returned function invokes <code>action()</code> and persists the result back to the store. If the return value of action is a Promise, the resolved value will be used as state.</p></blockquote> <p>Jika pemanggilan function dalam <em>actions</em> menghasilkan value langsung, maka value tersebut akan digunakan sebagai <em>state</em>. Namun, jika action me-<em>return</em> sebuah <strong>Promise</strong>, maka <em>resolved value</em>-lah yang akan digunakan sebagai state.</p> <h4 id="membuat-actions"><a href="#membuat-actions" class="header-anchor">#</a> Membuat Actions</h4> <p>Action biasa yang mengembalikan nilai state yang diubah.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> actions <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// Actions can just return a state update:</span>
  <span class="token function">increment</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// The returned object will be merged into the current state</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> count<span class="token operator">:</span> state<span class="token punctuation">.</span>count<span class="token operator">+</span><span class="token number">1</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Mendefinisikan action yang mengembalikan nilai <em>Promise</em> yang secara otomatis <em>resolved</em> value akan digunakan pada <em>state</em>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">asyncAction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">store</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Async actions can be pure async/promise functions:</span>
  <span class="token keyword">async</span> <span class="token function">incrementToServer</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/update'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token keyword">await</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>Bagaimana menghubungkan antara <em>store</em> dan <em>actions</em>?</li> <li>Bagaimana memanggil <em>action</em>-nya?</li> <li>Bagaimana mendapatkan nilai <em>state</em> pada <em>store</em>?</li> <li>Bagaimana passing nilai pada <em>function action</em>?</li></ul> <p>Mungkin kamu sudah memikirkan pertanyaan diatas ketika sudah pada tahap ini, itulah pertanyaan yang sama saya sendiri juga bertanya ketika mempelajari Redux yang tidak pernah masuk dalam otak saya. Oke kita lanjut semoga pertanyaannya akan terjawab seiring anda membaca artikel ini.</p> <h2 id="install"><a href="#install" class="header-anchor">#</a> Install</h2> <p>Untuk menambahkan unistore kedalam project Preact kalian. Langkah awal yang perlu dilakukkan adalah meng-<em>install</em> module unistore menggunakan <code>npm</code> atau <code>yarn</code>.</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> --save unistore
</code></pre></div><p>Untuk <em>import</em> module unistore kedalam project, kita tinggal menambahkan</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// The store:</span>
<span class="token keyword">import</span> createStore <span class="token keyword">from</span> <span class="token string">'unistore'</span>

<span class="token comment">// Preact integration</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Provider<span class="token punctuation">,</span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'unistore/preact'</span>
</code></pre></div><h2 id="penggunaan"><a href="#penggunaan" class="header-anchor">#</a> Penggunaan</h2> <h3 id="mendefinisikan-store"><a href="#mendefinisikan-store" class="header-anchor">#</a> Mendefinisikan Store</h3> <p>Sebagai contoh penggunaan unistore kedalam project kita akan membuat project kecil sebagai contoh kasus dalam tutorial selanjutnya. Pada file <code>index.js</code> kita akan mendefinisikan Store dan menjadikan <code>Provider</code> sebagai root component. Jadi Provider disini sebagai <strong>Root Component</strong>, yang nantinya sebagai tempat menyimpan state yang dapat di pakai di seluruh component.</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token comment">// src/index.js</span>
<span class="token keyword">import</span> createStore <span class="token keyword">from</span> <span class="token string">'unistore'</span>

<span class="token keyword">let</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token punctuation">{</span> todos<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> nama<span class="token operator">:</span> <span class="token string">&quot;NyanDev Indonesia&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Provider</span></span> <span class="token attr-name">store</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>store<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        ...
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Provider</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Dari source code diatas, untuk membuat store kita hanya perlu 3 langkah.</p> <ol><li>meng-<em>import</em> module <code>createStore</code> dari <code>unistore</code></li> <li>mendefinisikan variable <code>store</code> dan di-inisialisasi dengan memanggil method/function <code>createStore</code>. method ini membutuhkan 1 argument berupa inisialisasi state, atau nilai awal state kita. misalnya kita meng-inisialisasikannya dengan <code>{ todos: [] }</code>, object berisi properti <code>todos</code> dengan inisialisasi nilai awal berupa Array kosong.</li> <li>menambahkan <code>&lt;Provider store={store}&gt;&lt;/Provider&gt;</code> sebagai root component. <mark>root component yang dimaksud adalah component pertama atau terluar yang dirender sebagai component</mark>.</li></ol> <h3 id="menghubungkan-store"><a href="#menghubungkan-store" class="header-anchor">#</a> Menghubungkan Store</h3> <p>Untuk menghubungkan antara component dengan store tidaklah secara otomatis, namun kamu harus menggunakan <code>connect</code> sebagai jembatan atau akses antara component kamu dengan store.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'unistore/preact'</span>
</code></pre></div><p>Syntax method <code>connect</code> adalah sebagai berikut:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">connect</span><span class="token punctuation">(</span> mapStateToProps<span class="token punctuation">,</span> actions <span class="token punctuation">)</span><span class="token punctuation">(</span> component <span class="token punctuation">)</span>
</code></pre></div><h4 id="mapstatetoprops-function-array-string"><a href="#mapstatetoprops-function-array-string" class="header-anchor">#</a> mapStateToProps (Function|Array|String)</h4> <p>Daftar state store yang diperlukkan pada Component tersebut. Penulisan state yang dibutuhkan bisa dalam bentuk Array, String, atau Function. Contohnya:</p> <ul><li><code>connect(&quot;name&quot;)</code></li> <li><code>connect(&quot;name,todos&quot;)</code></li> <li><code>connect([&quot;name&quot;, &quot;todos&quot;])</code></li></ul> <h4 id="actions-function-object"><a href="#actions-function-object" class="header-anchor">#</a> actions (Function|Object)?</h4> <p>Parameter ini bersifat optional jadi bisa kamu isi atau tidak tergantung apa component yang bersangkutan membutuhkan actions dari unistore atau tidak. Action yang dimaksud adalah object yang berisi function  yang sudah saya contohkan pembuatannya diatas.</p> <p>selanjutnya kita mempassing <code>Component</code> kita di parameter pemanggilan function selanjutnya. Untuk cara penulisan pada tiap jenis component akan seperti berikut.</p> <h4 id="functional-component"><a href="#functional-component" class="header-anchor">#</a> Functional Component</h4> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token comment">// Standart</span>
<span class="token keyword">function</span> <span class="token function">Hello</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> nama <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hi, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>nama<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">'nama'</span><span class="token punctuation">)</span><span class="token punctuation">(</span>Hello<span class="token punctuation">)</span>
</code></pre></div><div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token comment">// Shorthand</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">'nama'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> nama <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hi, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>nama<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Untuk yang belum familiar dengan javascript shorthand atau arrow function sebaiknya kamu menggunakan cara mendefinisikan yang biasa.</p></div> <h4 id="classes-component"><a href="#classes-component" class="header-anchor">#</a> Classes Component</h4> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> nama <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hi, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>nama<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">'nama'</span><span class="token punctuation">)</span><span class="token punctuation">(</span>Hello<span class="token punctuation">)</span>
</code></pre></div><h3 id="pemanggilan-action"><a href="#pemanggilan-action" class="header-anchor">#</a> Pemanggilan Action</h3> <p>Dalam pemanggilan action kita perlu tau bagaimana memperlakukan state yang dari Store dalam Component kita. Istilah untuk Component yang terhubung dengan Store adalah <code>ConnectedComponent</code>. State yang dari Store akan dilempar ke Component melalui <code>props</code> jadi state dan action kita akan masuk kedalam <code>props</code>. Jadi untuk memanggil state dan action nya kita cukup menggunakan <code>this.props.?(state|action)</code>. contoh:</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;unistore/preact&quot;</span>

<span class="token keyword">const</span> actions <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">increment</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> incrementBy</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> count<span class="token operator">:</span> state<span class="token punctuation">.</span>count <span class="token operator">+</span> incrementBy <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">HiComponent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> nama <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hi, </span><span class="token punctuation">{</span>nama<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">increment</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">&quot;nama&quot;</span><span class="token punctuation">,</span> actions<span class="token punctuation">)</span><span class="token punctuation">(</span>HiComponent<span class="token punctuation">)</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">Note</p> <p>Karena preact langsung mem-<em>passing</em> <em>props</em> dan <em>state</em> ke dalam <strong>Functional Component</strong> jadi kamu bisa langsung menggunakannya. <code>props</code> untuk parameter pertama dan <code>state</code> untuk parameter kedua.</p></div> <h2 id="contoh"><a href="#contoh" class="header-anchor">#</a> Contoh</h2> <p>Berikut adalah contoh sederhana penerapan Unistore dalam project Preact oleh Developernya langsung.</p> <a href="https://codesandbox.io/s/l7y7w5qkz9" target="_blank" class="link-preview"><div class="link-preview--content"><p class="title">Unistore Demo - CodeSandbox</p><p>Unistore Demo by developit using preact, unistore</p> <p>codesandbox.io</p></div><div class="link-preview--thumbnail" style="background-image:url(https://telegra.ph/file/5feccb61e3b04cf8c0f3c.png);"></div></a><h2 id="kesimpulan"><a href="#kesimpulan" class="header-anchor">#</a> Kesimpulan</h2> <p><strong>Unistore</strong> menyebut dirinya sebagai <em>state container</em> dengan <em>component binding</em> untuk Preact dan React. Dengan modern API dan konsep yang sama dengan library redux dengan penyederhanaan cara kerja dalam mengatur <em>state</em> membuat kamu lebih mudah memahami bagaimana peranan module ini dalam mempermudah pekerjaanmu. Dengan ukuran nya yang sangat kecil (~350b) sehingga tidak banyak mempengaruhi size project kamu.</p> <p>Tapi, dalam memulai project Preact kamu tidak perlu langsung menggunakan Unistore dalam mengatur state kamu. Justru kita harus belajar dasar penggunaan state dalam komponen. Unistore atau module state management yang lain sangatlah di perlukan untuk project yang berskala besar.</p> <p>Kapan kita menggunakan unistore atau state management yang lain?. ketika Child Component semakin banyak dan pertukaran state semakin sering terjadi antar component maka pada saat itulah kamu memerlukan bantuan dari State Management. Unistore adalah salah satu contohnya dari sekian banyak state management lainnya.</p> <h2 id="referensi"><a href="#referensi" class="header-anchor">#</a> Referensi</h2> <a href="https://github.com/developit/unistore" target="_blank" class="link-preview"><div class="link-preview--content"><p class="title">GitHub - developit/unistore: 🌶 350b / 650b state container with component actions for Preact &amp; React</p><p>🌶 350b / 650b state container with component actions for Preact &amp; React - developit/unistore</p> <p>github.com</p></div><div class="link-preview--thumbnail" style="background-image:url(https://avatars1.githubusercontent.com/u/105127?s=400&amp;v=4);"></div></a><a href="https://css-tricks.com/learning-react-redux/" target="_blank" class="link-preview"><div class="link-preview--content"><p class="title">Leveling Up with React: Redux | CSS-Tricks</p><p>This tutorial is the final of a three-part series by Brad Westfall. We'll learn how to manage state across an entire application efficiently and in a way</p> <p>css-tricks.com</p></div><div class="link-preview--thumbnail" style="background-image:url(https://i2.wp.com/css-tricks.com/wp-content/uploads/2014/03/css-tricks-star.png?fit=512%2C512&amp;ssl=1);"></div></a><div id="disqus_thread"><div id="disqus_empty"></div></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/nyancodeid/blog/edit/master/preact/preact-unistore.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2/20/2020, 7:47:25 PM</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.7e510d46.js" defer></script><script src="/assets/js/2.9f835e0b.js" defer></script><script src="/assets/js/35.aa42c23e.js" defer></script><script src="/assets/js/4.40f398e1.js" defer></script><script src="/assets/js/6.fe87e115.js" defer></script><script src="/assets/js/8.921718ba.js" defer></script>
  </body>
</html>
