(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{418:function(a,t,s){"use strict";s.r(t);var e=s(29),n=Object(e.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"getting-started-with-pm2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#getting-started-with-pm2"}},[a._v("#")]),a._v(" Getting Started with PM2")]),a._v(" "),s("Author",{attrs:{name:"Ryan Aunur Rassyid"}}),a._v(" "),s("FeaturedImage",{attrs:{src:"/images/covers/getting-started-with-pm2.jpeg",author:"Jase Bloor",source:"unsplash.com",sourceLink:"https://unsplash.com/photos/By1VMCg3K4I"}}),a._v(" "),s("h2",{attrs:{id:"introduction"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#introduction"}},[a._v("#")]),a._v(" Introduction")]),a._v(" "),s("p",[a._v("Ketika kita bekerja dengan NodeJS kita bisa dengan mudah menjalankan aplikasi yang sudah kita buat sebelumnya. Hanya dengan mengetik perintah "),s("code",[a._v("node index.js")]),a._v(" maka aplikasi kita akan berjalan dengan baik. Webserver Express kita berjalan dengan baik dan sesuai dengan ekspektasi kita. Satu atau dua error muncul secara tiba tiba ketika kita memanggil API dengan melibatkan proses yang tidak menentu suksesnya, dan ya kita tinggal menjalankan ulang aplikasinya dan sekarang web server kita kembali online. But wait, gimana kalau aplikasi nodejs ini sudah di deploy di server? apakah kita juga perlu mengecek 24 jam apakah aplikasi kita error dan perlu dijalankan ulang? "),s("em",[a._v("Arghhh, that's was terrible idea")]),a._v(".")]),a._v(" "),s("p",[a._v("Ketika aplikasi sudah di deploy ke server, kita mau semua nya berjalan secara autopilot. Kita hanya memantau hasil log sebelumnya atau critical error yang dikirim lewat email atau bot telegram kita. Jadi kita tidak perlu menatap Laptop atau PC sepanjang hari hanya untuk melihat apakah aplikasi kita perlu di-"),s("em",[a._v("restart")]),a._v(" atau tidak. Kita perlu aplikasi lain untuk memanage aplikasi-aplikasi node kita.")]),a._v(" "),s("p",[a._v("Salah satu dari sekian aplikasi process manager di nodejs ada yang paling mudah digunakan tapi juga powerfull. Ya, namanya "),s("code",[a._v("PM2")]),a._v(". "),s("strong",[a._v("PM2")]),a._v(" adalah daemon process manager yang membantu kita mengelola dan menjaga aplikasi kita agar tetap online. PM2 dioperasikan lewat command line atau berbasis CLI (Command Line Interface) yang sederhana dan intuitif, yang tentu saja di-install lewat NPM juga. "),s("em",[a._v("Wow, that's really cool")]),a._v(".")]),a._v(" "),s("p",[a._v("Dalam artikel ini kita akan deep drive untuk berkenalan dengan PM2. "),s("em",[a._v("Here we go")]),a._v(".")]),a._v(" "),s("h2",{attrs:{id:"table-of-contents"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#table-of-contents"}},[a._v("#")]),a._v(" Table of Contents")]),a._v(" "),s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#introduction"}},[a._v("Introduction")])]),s("li",[s("a",{attrs:{href:"#table-of-contents"}},[a._v("Table of Contents")])]),s("li",[s("a",{attrs:{href:"#why-pm2"}},[a._v("Why PM2?")])]),s("li",[s("a",{attrs:{href:"#instalasi"}},[a._v("Instalasi")])]),s("li",[s("a",{attrs:{href:"#basic-commands"}},[a._v("Basic Commands")]),s("ul",[s("li",[s("a",{attrs:{href:"#start"}},[a._v("Start")])]),s("li",[s("a",{attrs:{href:"#list-managed-apps"}},[a._v("List Managed Apps")])]),s("li",[s("a",{attrs:{href:"#restart"}},[a._v("Restart")])]),s("li",[s("a",{attrs:{href:"#stop"}},[a._v("Stop")])]),s("li",[s("a",{attrs:{href:"#logs"}},[a._v("Logs")])]),s("li",[s("a",{attrs:{href:"#monitoring"}},[a._v("Monitoring")])]),s("li",[s("a",{attrs:{href:"#delete"}},[a._v("Delete")])])])]),s("li",[s("a",{attrs:{href:"#watch-mode"}},[a._v("Watch Mode")])]),s("li",[s("a",{attrs:{href:"#menyimpan-konfigurasi"}},[a._v("Menyimpan Konfigurasi")])]),s("li",[s("a",{attrs:{href:"#kesimpulan"}},[a._v("Kesimpulan")])]),s("li",[s("a",{attrs:{href:"#referensi"}},[a._v("Referensi")])])])]),s("p"),a._v(" "),s("h2",{attrs:{id:"why-pm2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#why-pm2"}},[a._v("#")]),a._v(" Why PM2?")]),a._v(" "),s("p",[a._v("Beberapa dari kalian mungkin bertanya, kenapa harus PM2? kenapa tidak PM-GAN?. Kita tau bahwa kita bisa pakai app atau tool lain kalau ingin aplikasi kita dimuat ulang jika mengalami error. Contohnya saja "),s("code",[a._v("supervisor")]),a._v(" atau "),s("code",[a._v("nodemon")]),a._v(", kedua aplikasi tersebut memang terbukti mengatasi masalah kita. Namun kedua aplikasi tersebut menurut penulis hanya cocok dipakai untuk keperluan selama prosess development saja.")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.statically.io/img/telegra.ph/f=auto,q=100/file/535d76a5718c989e90e1a.png",alt:"Perbedaan Apps yang berjalan dengan dan tanpa PM2"}}),a._v(" "),s("em",[a._v("Running PM2 & Node.js in Production Environments - hackernoon.com")])]),a._v(" "),s("p",[a._v("Sedangkan PM2 memiliki fitur yang bukan hanya sekedar file watcher atau reload app saja. Dari beberapa fitur PM2, yang paling berguna saat production adalah:")]),a._v(" "),s("ul",[s("li",[s("p",[s("code",[a._v("Restarting after crashes")]),a._v(": PM2 memungkinkan kita untuk menjaga agar aplikasi kita tetap berfungsi walaupun app mengalami error atau crash.")])]),a._v(" "),s("li",[s("p",[s("code",[a._v("Monitoring and managing processes remotely")]),a._v(": kita tidak melulu memonitoring pm2 lewat CLI saja, kita juga bisa memonitoring nya lewat menggunakan "),s("a",{attrs:{href:"https://pm2.keymetrics.io/",target:"_blank",rel:"noopener noreferrer"}},[a._v("KeyMetrics"),s("OutboundLink")],1),a._v(" contohnya.")])]),a._v(" "),s("li",[s("p",[s("code",[a._v("It doesn’t just run Node apps")]),a._v(": PM2 tidak terbatas hanya untuk NodeJS saja, kamu bisa menjalankan PHP Worker, atau aplikasi yang membutuhkan PM2 sebagai proccess managernya.")])]),a._v(" "),s("li",[s("p",[s("code",[a._v("Restart-Persistance")]),a._v(": PM2 bisa menyimpan dan mengingat aplikasi mana saja yang berjalan padanya dan memulai kembali dengan segera, ketika server mengalami restart atau kembali hidup.")])])]),a._v(" "),s("p",[a._v("Dan masih banyak lagi, seperti Logs, PM2 API, Cluster, Fork, Environment dan lain sebagainya.")]),a._v(" "),s("h2",{attrs:{id:"instalasi"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#instalasi"}},[a._v("#")]),a._v(" Instalasi")]),a._v(" "),s("p",[a._v("PM2 bisa di-install menggunakan NPM atau Yarn secara global maupun local project (PM2 API).")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" pm2@latest -g\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# or")]),a._v("\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" global "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" pm2\n")])])]),s("h2",{attrs:{id:"basic-commands"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#basic-commands"}},[a._v("#")]),a._v(" Basic Commands")]),a._v(" "),s("p",[a._v("Kita mulai perkenalan PM2 dengan basic command yang sering dipakai untuk memulai, mengulang, memberhentikan, dan menampilkan logs aplikasi. Untuk berinteraksi dengan PM2 kamu bisa menggunakan perintah CLI atau menggunakan configuration file seperti JSON, Javascript, dan YAML. Untuk kali ini karena kita mau berkenalan dengan PM2 kita bahas yang CLI dulu supaya paham bagaimana alur kerja dan sekaligus mebiasakan diri dengan PM2.")]),a._v(" "),s("h3",{attrs:{id:"start"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#start"}},[a._v("#")]),a._v(" Start")]),a._v(" "),s("p",[a._v("Untuk menjalankan aplikasi nodejs anda tinggal memanggil perintah berikut. Perlu dicatat kalau kita perlu menambahkan param "),s("code",[a._v("--name")]),a._v(" untuk memudahkan kita dalam mengenali aplikasi kita.")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("$ pm2 start index.js --name app_name\n")])])]),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("PM2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" Starting /path/to/project/src/index.js "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" fork_mode "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("PM2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" Done.\n┌──────────┬────┬─────────┬──────┬──────┬────────┬─────────┬────────┬─────┬───────────┬───────────┬──────────┐\n│ App name │ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("id")]),a._v(" │ version │ mode │ pid  │ status │ restart │ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("uptime")]),a._v(" │ cpu │ mem       │ user      │ watching │\n├──────────┼────┼─────────┼──────┼──────┼────────┼─────────┼────────┼─────┼───────────┼───────────┼──────────┤\n│ app_name │ "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("  │ "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.0")]),a._v(".0   │ fork │ "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1145")]),a._v(" │ online │ "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("       │ 0s     │ "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("%  │ "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("32.3")]),a._v(" MB   │ ryanaunur │ disabled │\n└──────────┴────┴─────────┴──────┴──────┴────────┴─────────┴────────┴─────┴───────────┴───────────┴──────────┘\n Use "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),a._v("pm2 show "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("id"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),a._v(" to get "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("more")]),a._v(" details about an app\n")])])]),s("h3",{attrs:{id:"list-managed-apps"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#list-managed-apps"}},[a._v("#")]),a._v(" List Managed Apps")]),a._v(" "),s("p",[a._v("Untuk melihat aplikasi apa yang sedang berjalan pada PM2 kita bisa panggil perintah berikut. Ada 3 opsi silahkan pilih tergantung anda nyaman menggunakan perintah yang mana. bisa pakai "),s("code",[a._v("list")]),a._v(", "),s("code",[a._v("ls")]),a._v(", atau "),s("code",[a._v("status")]),a._v(" semua nya sama.")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("$ pm2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("list"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("status"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("┌──────────┬────┬─────────┬──────┬──────┬────────┬─────────┬────────┬──────┬───────────┬───────────┬──────────┐\n│ App name │ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("id")]),a._v(" │ version │ mode │ pid  │ status │ restart │ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("uptime")]),a._v(" │ cpu  │ mem       │ user      │ watching │\n├──────────┼────┼─────────┼──────┼──────┼────────┼─────────┼────────┼──────┼───────────┼───────────┼──────────┤\n│ app_name │ "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("  │ "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.0")]),a._v(".0   │ fork │ "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1145")]),a._v(" │ online │ "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("       │ 2m     │ "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.2")]),a._v("% │ "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("44.5")]),a._v(" MB   │ ryanaunur │ disabled │\n└──────────┴────┴─────────┴──────┴──────┴────────┴─────────┴────────┴──────┴───────────┴───────────┴──────────┘\n Use "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),a._v("pm2 show "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("id"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),a._v(" to get "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("more")]),a._v(" details about an app\n")])])]),s("h3",{attrs:{id:"restart"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#restart"}},[a._v("#")]),a._v(" Restart")]),a._v(" "),s("p",[a._v("Karena aplikasi kita tidak akan berefek ketika ada perubahan script sebelum aplikasi di-restart maka kita harus melakukkan restart pada PM2 dengan perintah dibawah ini. Namun jika anda menambahkan param "),s("code",[a._v("--watch")]),a._v(", maka PM2 akan melihat setiap perubahan app dan langsung secara otomatis akan memuat ulang aplikasi kita dengan script terbaru yang diubah tadi.")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("$ pm2 restart "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("app_name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("id")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("all"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("PM2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" Applying action restartProcessId on app "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("app_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("ids: "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("PM2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("app_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" ✓\n┌──────────┬────┬─────────┬──────┬──────┬────────┬─────────┬────────┬─────┬───────────┬───────────┬──────────┐\n│ App name │ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("id")]),a._v(" │ version │ mode │ pid  │ status │ restart │ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("uptime")]),a._v(" │ cpu │ mem       │ user      │ watching │\n├──────────┼────┼─────────┼──────┼──────┼────────┼─────────┼────────┼─────┼───────────┼───────────┼──────────┤\n│ app_name │ "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("  │ "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.0")]),a._v(".0   │ fork │ "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1919")]),a._v(" │ online │ "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("       │ 0s     │ "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("%  │ "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("18.5")]),a._v(" MB   │ ryanaunur │ disabled │\n└──────────┴────┴─────────┴──────┴──────┴────────┴─────────┴────────┴─────┴───────────┴───────────┴──────────┘\n Use "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),a._v("pm2 show "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("id"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),a._v(" to get "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("more")]),a._v(" details about an app\n")])])]),s("h3",{attrs:{id:"stop"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#stop"}},[a._v("#")]),a._v(" Stop")]),a._v(" "),s("p",[a._v("Untuk menghentikan aplikasi kamu tinggal menggunakan perintah "),s("code",[a._v("stop")]),a._v(".")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("$ pm2 stop "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("app_name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("id")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("all"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("PM2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" Applying action stopProcessId on app "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("app_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("ids: "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("PM2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("app_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" ✓\n┌──────────┬────┬─────────┬──────┬─────┬─────────┬─────────┬────────┬─────┬────────┬───────────┬──────────┐\n│ App name │ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("id")]),a._v(" │ version │ mode │ pid │ status  │ restart │ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("uptime")]),a._v(" │ cpu │ mem    │ user      │ watching │\n├──────────┼────┼─────────┼──────┼─────┼─────────┼─────────┼────────┼─────┼────────┼───────────┼──────────┤\n│ app_name │ "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("  │ "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.0")]),a._v(".0   │ fork │ "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("   │ stopped │ "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("       │ "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("      │ "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("%  │ "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" B    │ ryanaunur │ disabled │\n└──────────┴────┴─────────┴──────┴─────┴─────────┴─────────┴────────┴─────┴────────┴───────────┴──────────┘\n Use "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),a._v("pm2 show "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("id"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),a._v(" to get "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("more")]),a._v(" details about an app\n")])])]),s("h3",{attrs:{id:"logs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#logs"}},[a._v("#")]),a._v(" Logs")]),a._v(" "),s("p",[a._v("Untuk melihat logs yang dihasilkan dari aplikasi yang berjalan pada PM2 kamu bisa menggunakan perintah "),s("code",[a._v("logs")]),a._v(".")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.statically.io/img/telegra.ph/f=auto,q=100/file/a17894336bb460b3a466c.png",alt:"Log Management"}}),a._v(" "),s("em",[a._v("Running PM2 & Node.js in Production Environments - hackernoon.com")])]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# display spesific app logs")]),a._v("\n$ pm2 logs app_name\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# display 100 lines of standart and error output logs")]),a._v("\n$ pm2 logs app_name --lines "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# display standart output logs only")]),a._v("\n$ pm2 logs app_name --out\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# display error output logs only")]),a._v("\n$ pm2 logs app_name --err\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Flush app logs")]),a._v("\n$ pm2 flush "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("app_name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# or all")]),a._v("\n$ pm2 logs all\n")])])]),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("TAILING"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" Tailing last "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("15")]),a._v(" lines "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("app_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" process "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("change the value with --lines option"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n/"),s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("$HOME")]),a._v("/.pm2/logs/app-name-error.log last "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("15")]),a._v(" lines:\n/"),s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("$HOME")]),a._v("/.pm2/logs/app-name-out.log last "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("15")]),a._v(" lines:\n"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("app_name "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" Listening on new task"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("app_name "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" Listening on new task"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("app_name "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" Listening on new task"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),a._v("\n")])])]),s("h3",{attrs:{id:"monitoring"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#monitoring"}},[a._v("#")]),a._v(" Monitoring")]),a._v(" "),s("p",[a._v("Memonitoring penggunaan resouce tiap apps, dan log dari aplikasi secara bersamaan kamu bisa menggunakan perintah "),s("code",[a._v("monit")]),a._v(".")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("$ pm2 monit\n")])])]),s("p",[s("img",{attrs:{src:"/images/posts/pm2-monit-ss.png",alt:"PM2 Monit"}}),a._v(" "),s("em",[a._v("PM2 Monitoring Result")])]),a._v(" "),s("h3",{attrs:{id:"delete"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#delete"}},[a._v("#")]),a._v(" Delete")]),a._v(" "),s("p",[a._v("Terakhir untuk menghapus aplikasi mu dari daftar PM2 maka kamu tinggal jalankan perintah "),s("code",[a._v("delete")]),a._v(".")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("$ pm2 delete "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("app_name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("id")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("all"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("PM2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" Applying action deleteProcessId on app "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("app_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("ids: "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("PM2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("app_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" ✓\n┌──────────┬────┬─────────┬──────┬─────┬────────┬─────────┬────────┬─────┬─────┬──────┬──────────┐\n│ App name │ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("id")]),a._v(" │ version │ mode │ pid │ status │ restart │ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("uptime")]),a._v(" │ cpu │ mem │ user │ watching │\n└──────────┴────┴─────────┴──────┴─────┴────────┴─────────┴────────┴─────┴─────┴──────┴──────────┘\n Use "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),a._v("pm2 show "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("id"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),a._v(" to get "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("more")]),a._v(" details about an app\n")])])]),s("h2",{attrs:{id:"watch-mode"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#watch-mode"}},[a._v("#")]),a._v(" Watch Mode")]),a._v(" "),s("p",[a._v("Untuk memungkinkan PM2 menanggapi setiap perubahan file yang ada pada aplikasi anda dan melakukkan restart otomatis atas perubahan tersebut maka kamu perlu menambahkan param "),s("code",[a._v("--watch")]),a._v(". Sedangkan untuk mengabaikan perubahan yang ada pada folder tertentu kamu tinggal menambahkan param "),s("code",[a._v('--ignore-watch="folder,folder"')]),a._v(".")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("$ pm2 start index.js --name app_name --watch\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# exclude node_modules from watched file")]),a._v("\n$ pm2 start index.js --name app_name --watch --ignore-watch"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"node_modules"')]),a._v("\n")])])]),s("h2",{attrs:{id:"menyimpan-konfigurasi"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#menyimpan-konfigurasi"}},[a._v("#")]),a._v(" Menyimpan Konfigurasi")]),a._v(" "),s("p",[a._v("Secara default PM2 tidak akan menyimpan daftar aplikasi yang berjalan padanya sebelum anda menyimpannya. Kita perlu menyimpan daftar aplikasi jika kamu tidak ingin ketika server kamu restart dan daftar pm2 hilang dan kamu perlu menjalankan nya kembali satu persatu.")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("$ pm2 save\n")])])]),s("p",[a._v("Nah daftar aplikasi kita sudah disimpan oleh PM2. Sekarang jika kamu ingin PM2 menjalankan aplikasi yang sudah disimpan tadi tepat ketika server menyala maka kamu perlu membuat nya berjalan ketika "),s("em",[a._v("startup")]),a._v(". Dengan menjalankan perintah "),s("code",[a._v("startup")]),a._v(" berikut.")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("$ pm2 startup\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# manually chose startup script")]),a._v("\n$ pm2 startup "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("ubuntu "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" ubuntu14 "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" ubuntu12 "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" centos "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" centos6 "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" arch "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" oracle "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" amazon "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" macos "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" darwin "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" freebsd "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" systemd "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" systemv "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" upstart "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" launchd "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" rcd "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" openrc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),s("p",[a._v("Secara otomatis pm2 akan menjalankan daemon (service) sesuai dengan Operating System yang kita pakai. Karena setiap OS dan versi nya memiliki konfigurasi sendiri terutama windows, bagi kalian pengguna window mungkin perlu menggunakan tool tambahan karena miliki cara sendiri dalam mengkonfigurasi startup.")]),a._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[a._v("Windows User")]),a._v(" "),s("p",[a._v("There are some external libraries to generate a Windows compatible startup script, please checkout "),s("a",{attrs:{href:"https://www.npmjs.com/package/pm2-windows-service",target:"_blank",rel:"noopener noreferrer"}},[a._v("pm2-windows-service"),s("OutboundLink")],1),a._v(" or "),s("a",{attrs:{href:"https://www.npmjs.com/package/pm2-windows-startup",target:"_blank",rel:"noopener noreferrer"}},[a._v("pm2-windows-startup"),s("OutboundLink")],1),a._v(".")])]),a._v(" "),s("h2",{attrs:{id:"kesimpulan"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#kesimpulan"}},[a._v("#")]),a._v(" Kesimpulan")]),a._v(" "),s("p",[a._v("Dengan adanya aplikasi atau tools untuk memanage aplikasi kita akan sangat memudahkan pekerjakan kita dalam memonitoring aplikasi kita diserver. Karena server akan terus berjalan maka kita juga perlu menjaga agar aplikasi kita berjalan terus tanpa kendala serius.")]),a._v(" "),s("p",[a._v("PM2 membantu kita dalam mewujudkan bagaimana cara memperlakukkan aplikasi kita dengan berbeda ketika dalam lingkungan production yang mewajibkan kita untuk "),s("strong",[a._v("Zero Down Time")]),a._v(" dan memonitoring aplikasi dengan cara yang mudah. Diartikel selanjutnya kita akan belajar bagimana cara berinteraksi dengan PM2 dengan menggunakan konfigurasi file seperti JSON, Javascript, dan YAML. "),s("em",[a._v("See you next time")]),a._v(".")]),a._v(" "),s("h2",{attrs:{id:"referensi"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#referensi"}},[a._v("#")]),a._v(" Referensi")]),a._v(" "),s("a",{staticClass:"link-preview",attrs:{href:"https://www.digitalocean.com/community/tutorials/nodejs-pm2",target:"_blank"}},[s("div",{staticClass:"link-preview--content"},[s("p",{staticClass:"title"},[a._v("Getting Started with PM2, the Node.js Process Manager | DigitalOcean")]),s("p",[a._v("Learn the very basics of the PM2 production process manager. See what it can do for you and how to get started with using it.")]),a._v(" "),s("p",[a._v("www.digitalocean.com")])]),s("div",{staticClass:"link-preview--thumbnail",staticStyle:{"background-image":"url(https://www.digitalocean.com/assets/community/illustrations/DigitalOcean_Community-e00e73a18df20667c3117725e727f3ade330204dff619ad8153050ded7341627.jpg)"}})]),s("a",{staticClass:"link-preview",attrs:{href:"https://pm2.keymetrics.io/docs/usage/quick-start/",target:"_blank"}},[s("div",{staticClass:"link-preview--content"},[s("p",{staticClass:"title"},[a._v("PM2 - Quick Start")]),s("p",[a._v("Advanced process manager for production Node.js applications. Load balancer, logs facility, startup script, micro service management, at a glance.")]),a._v(" "),s("p",[a._v("pm2.keymetrics.io")])]),s("div",{staticClass:"link-preview--thumbnail",staticStyle:{"background-image":"url(https://raw.githubusercontent.com/unitech/pm2/master/pres/pm2.20d3ef.png)"}})]),s("a",{staticClass:"link-preview",attrs:{href:"https://hackernoon.com/running-pm2-node-js-in-production-environments-13e703fc108a",target:"_blank"}},[s("div",{staticClass:"link-preview--content"},[s("p",{staticClass:"title"},[a._v("Running PM2 & Node.js in Production Environments | Hacker Noon")]),s("p",[a._v("PM2 is a battle tested, production ready runtime and process manager for Node.js applications.")]),a._v(" "),s("p",[a._v("hackernoon.com")])]),s("div",{staticClass:"link-preview--thumbnail",staticStyle:{"background-image":"url(https://hackernoon.com/Devimg/story-image-default.png)"}})]),s("Disqus")],1)}),[],!1,null,null,null);t.default=n.exports}}]);